(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{183:function(e,t,n){e.exports=n(312)},217:function(e,t,n){},312:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(27),o=n.n(r),s=n(12),u=n(18);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(49),c=n(171),d={fetchingForums:!1,forums:null,currentForum:"general",error:!1},p={fetchingUser:!0,authenticated:!1,error:null,_id:null,name:null,email:null,username:null,avatarUrl:null,githubUrl:null,githubLocation:null,githubBio:null,role:null},m={fetchingDiscussions:!0,discussions:null,fetchingPinnedDiscussions:!0,pinnedDiscussions:null,sortingMethod:"date",error:null},f={fetchingDiscussion:!0,toggleingFavorite:!1,postingOpinion:!1,opinionContent:null,opinionError:null,deletingDiscussion:!1,deletedDiscussion:!1,deletingOpinion:null,discussion:null,error:null},g={postingSuccess:!1,errorMsg:null,postingDiscussion:!1,title:"",tile:null,content:null,tags:[],pinned:!1},h={loadingInfo:!1,info:{discussionCount:0,opinionCount:0,forumCount:0,userCount:0,forums:[]},error:null,creatingForum:!1,creatingForumError:null,deletingForum:!1,deletingForumError:null},v={fetchingProfile:!0,profile:{},error:null},y=Object(l.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"start_fetching_user":return Object.assign({},e,{fetchUser:!0});case"fetching_user_success":var n=t.payload,a=n._id,i=n.name,r=n.username,o=n.avatarUrl,s=n.email,u=n.githubBio,l=n.githubUrl,c=n.githubLocation,d=n.role;return Object.assign({},e),{fetchingUser:!1,authenticated:!0,error:null,_id:a,name:i,username:r,avatarUrl:o,email:s,githubBio:u,githubUrl:l,githubLocation:c,role:d};case"fetching_user_failure":return Object.assign({},p,{fetchingUser:!1,error:"Unable to fetch user!"});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"start_fetching_forums":return Object.assign({},e,{fetchingForums:!0});case"stop_fetching_forums":return Object.assign({},e,{fetchingForums:!1});case"fetching_forums_success":return Object.assign({},e,{forums:t.payload,fetchingForums:!1,error:!1});case"fetching_forums_failure":return Object.assign({},e,{fetchingForums:!1,error:"Unable to fetch forums"});case"update_current_forum":return Object.assign({},e,{currentForum:t.payload});default:return e}},feed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"start_fetching_discussions":return Object.assign({},e,{fetchingDiscussions:!0,error:null});case"stop_fetching_discussions":return Object.assign({},e,{fetchingDiscussions:!1});case"fetching_discussions_success":return Object.assign({},e,{discussions:t.payload,fetchingDiscussions:!1,error:null});case"fetching_discussions_failure":return Object.assign({},e,{fetchingDiscussions:!1,error:"Unable to fetch discussions at the moment."});case"start_fetching_pinned_discussions":return Object.assign({},e,{fetchingPinnedDiscussions:!0,error:null});case"stop_fetching_pinned_discussions":return Object.assign({},e,{fetchingPinnedDiscussions:!1});case"fetching_pinned_discussions_success":return Object.assign({},e,{pinnedDiscussions:t.payload,fetchingPinnedDiscussions:!1,error:null});case"fetching_pinned_discussions_failure":return Object.assign({},e,{fetchingPinnedDiscussions:!1,error:"Unable to fetch pinned discussions at the moment."});case"update_sorting_method":return Object.assign({},e,{sortingMethod:t.payload});case"invalid_forum":return Object.assign({},e,{error:"Sorry, couldn't find the forum.",fetchingPinnedDiscussions:!1,fetchingDiscussions:!1});default:return e}},discussion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetching_single_discussion_start":return Object.assign({},e,{fetchingDiscussion:!0});case"fetching_single_discussion_end":return Object.assign({},e,{fetchingDiscussion:!1});case"fetching_single_discussion_success":return Object.assign({},e,{discussion:t.payload,fetchingDiscussion:!1,error:null});case"fetching_single_discussion_failure":return Object.assign({},e,{fetchingDiscussion:!1,error:"Unable to fetch discussion. Please check out the url."});case"toggle_favorite_start":return Object.assign({},e,{toggleingFavorite:!0});case"toggle_favorite_success":case"toggle_favorite_failure":return Object.assign({},e,{toggleingFavorite:!1});case"update_opinion_content":return Object.assign({},e,{opinionContent:t.payload});case"posting_opinion_start":return Object.assign({},e,{postingOpinion:!0,opinionError:null});case"posting_opinion_success":return Object.assign({},e,{postingOpinion:!1,opinionContent:null,opinionError:null});case"posting_opinion_failure":return Object.assign({},e,{postingOpinion:!1,opinionContent:null,opinionError:t.payload});case"delete_disc_start":return Object.assign({},e,{deletingDiscussion:!0});case"delete_disc_success":return Object.assign({},e,{deletingDiscussion:!1,deletedDiscussion:!0});case"delete_disc_failure":return Object.assign({},e,{deletingDiscussion:!1,deletedDiscussion:!1});case"delete_disc_redirect":return Object.assign({},e,{deletedDiscussion:!1});case"delete_opinion_start":return Object.assign({},e,{deletingOpinion:t.payload});case"delete_opinion_success":case"delete_opinion_failure":return Object.assign({},e,{deletingOpinion:null});default:return e}},newDiscussion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"posting_discussion_start":return Object.assign({},e,{postingDiscussion:!0});case"posting_discussion_success":return Object.assign({},g,{postingSuccess:!0,postingDiscussion:!1,errorMsg:null});case"posting_discussion_failure":return Object.assign({},e,{postingSuccess:!1,postingDiscussion:!1,errorMsg:t.payload||"Unable to post discussion."});case"clear_success_message":return Object.assign({},g,{postingSuccess:!1});case"update_discussion_title":return Object.assign({},e,{title:t.payload});case"update_discussion_content":return Object.assign({},e,{content:t.payload});case"update_discussion_tile":return Object.assign({},e,{tile:t.payload});case"update_discussion_pin_status":return Object.assign({},e,{pinned:t.payload});case"update_discussion_tags":return Object.assign({},e,{tags:t.payload});default:return e}},adminInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"get_all_info_start":return Object.assign({},e,{loadingInfo:!0,error:null});case"get_all_info_success":return Object.assign({},e,{loadingInfo:!1,info:t.payload,error:null});case"get_all_info_failure":return Object.assign({},e,{loadingInfo:!1,error:"Something went wrong while loading admin level information."});case"create_forum":return Object.assign({},e,{creatingForumError:null,creatingForum:!0});case"create_forum_success":return Object.assign({},e,{creatingForum:!1,creatingForumError:null});case"create_forum_failure":return Object.assign({},e,{creatingForum:!1,creatingForumError:"Something went wrong while trying to create the forum. Please try again. Also check out if the forum already exists."});case"delete_forum":return Object.assign({},e,{deletingForum:!0,deletingForumError:null});case"delete_forum_success":return Object.assign({},e,{deletingForum:!1,deletingForumError:null});case"delete_forum_failure":return Object.assign({},e,{deletingForum:!1,deletingForumError:"Something went wrong while trying to delete the forum. Please try again later."});default:return e}},userProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_user_profile_start":return Object.assign({},e,{fetchingProfile:!0,error:null});case"fetch_user_profile_success":return Object.assign({},e,{fetchingProfile:!1,profile:t.payload,error:null});case"fetch_user_profile_failure":return Object.assign({},e,{fetchingProfile:!1,error:"Unable to fetch user profile. Please check out for correct username."});default:return e}}}),_=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,b=Object(l.e)(y,_(Object(l.a)(c.a))),E=n(6),O=n(7),j=n(9),C=n(8),k=n(37),F=n(323),D=n(325),S=n(322),w=n(321),I=n(176),P=n(317),M=n(16),T=n.n(M),U=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){var e;return Object(E.a)(this,n),(e=t.call(this)).inputChange=function(t){var n=t.target.value;e.setState({userInput:n})},e.logIn=function(t){t.preventDefault(),T.a.post("/api/user/authViaGitHub?user=".concat(e.state.userInput)).then((function(e){window.location="/"})).catch((function(e){console.error(e)}))},e.state={userInput:""},e}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.signedIn,n=e.userName,a=e.avatar,r=e.gitHandler;return i.a.createElement("div",null,i.a.createElement(F.a.Collapse,{id:"basic-navbar-nav"},i.a.createElement(D.a,{className:"mr-auto"},i.a.createElement(D.a.Link,{href:"#home"},"Home"),i.a.createElement(D.a.Link,{href:"#link"},"Link"),i.a.createElement(S.a,{title:t?n:"Sign Up / Sign In",id:"basic-nav-dropdown"},!t&&i.a.createElement(w.a,{className:"p-3"},i.a.createElement(w.a.Group,{controlId:"formBasicEmail"},i.a.createElement(w.a.Control,{type:"text",onChange:this.inputChange,placeholder:"Enter user"})),this.state.userInput.length?i.a.createElement(I.a,{variant:"primary",type:"submit",onClick:this.logIn},"Submit"):null),t&&i.a.createElement("span",{onClick:this.toggleSubMenu},i.a.createElement(P.a,{src:a,alt:"".concat(n," Avatar"),thumbnail:!0}),i.a.createElement(S.a.Item,{href:"/user/".concat(r)},"My Profile")),t&&i.a.createElement(S.a.Item,{href:"/user/".concat(r)},"Sign Out")))))}}]),n}(a.Component);U.defaultProps={signedIn:!1,userName:"",gitHandler:"",avatar:""};var N=U,x=function(){return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.a.createElement("path",{d:"M51.1388842,81.5721454 L69.5667388,100 L92.0066458,100 C96.4114635,100 100,96.4212534 100,92.0066458 L100,7.99335421 C100,3.58853654 96.4212534,0 92.0066458,0 L7.99335421,0 C3.58853654,0 0,3.57874658 0,7.99335421 L0,92.0066458 C0,96.4114635 3.57874658,100 7.99335421,100 L10.5882353,100 L10.5882353,44.7058824 C10.7474244,24.5366987 27.1464843,8.23529412 47.3529412,8.23529412 C67.6575276,8.23529412 84.1176471,24.6954136 84.1176471,45 C84.1176471,64.0263195 69.6647717,79.676989 51.1388842,81.5721454 Z M24.2232146,73.5788183 L24.1176471,73.6843859 L50.4332612,100 L24.1176471,100 L24.1176471,73.4929507 C24.1527823,73.521637 24.1879715,73.5502596 24.2232146,73.5788183 Z",id:"Combined-Shape",fill:"#F1C40F"}),i.a.createElement("circle",{id:"Oval",fill:"#F1C40F",cx:"47.6470588",cy:"45.2941176",r:"23.5294118"})))),i.a.createElement("div",null,"ReForum"))},L=n(21),A=n.n(L),R=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props.navigationLinks;return e?i.a.createElement("section",{className:"w-100 navigation-bar"},i.a.createElement("ul",{className:"d-flex justify-content-around"},e.map((function(e){return 0===e.id?i.a.createElement("li",{key:A.a.uniqueId("navLink_")},i.a.createElement(s.a,{to:"/"},"Home")):i.a.createElement("li",{key:A.a.uniqueId("navLink_")},i.a.createElement(s.c,{to:e.link},e.name))})))):null}}]),n}(a.Component);R.defaultProps={navigationLinks:[{id:0,name:"General",link:"/"}]};var B=R,H=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"renderNavLinks",value:function(){var e=this.props.forums;return e?e.map((function(e){return{id:e._id,name:e.forum_name,link:"/".concat(e.forum_slug)}})):null}},{key:"render",value:function(){var e=this.props.user,t=e.authenticated,n=e.name,a=e.username,r=e.avatarUrl;return i.a.createElement("header",{style:{display:"none"}},i.a.createElement(F.a,{className:"flex-wrap",variant:"dark"},i.a.createElement(F.a.Brand,{href:"#home"},"Navbar"),i.a.createElement(N,{signedIn:t,userName:n||a,gitHandler:a,avatar:r}),i.a.createElement(B,{navigationLinks:this.renderNavLinks()})))}}]),n}(a.Component),W=Object(u.b)((function(e){return{user:e.user,forums:e.app.forums}}))(H),z=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){return i.a.createElement("div",null)}}]),n}(a.Component);z.defaultProps={};var q=z,G=(n(217),function(){return function(e,t){e({type:"start_fetching_forums"}),T.a.get("/api/forum").then((function(t){return e({type:"fetching_forums_success",payload:t.data})}),(function(t){return e({type:"fetching_forums_failure"})}))}}),K=function(){return function(e,t){e({type:"start_fetching_user"}),T.a.get("/api/user/getUser",{withCredentials:!0}).then((function(t){t.data._id?e({type:"fetching_user_success",payload:t.data}):e({type:"fetching_user_failure"})}),(function(t){return e({type:"fetching_user_failure"})}))}},V=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.params,n=e.updateCurrentForum,a=e.getForums,i=e.getUser;a(),i(),n(t.forum||"")}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.forums,n=e.params,a=e.currentForum,i=e.updateCurrentForum,r="";n.forum?r=n.forum:t&&t.length&&(r=t[0].forum_slug),r!==a&&i(r)}},{key:"render",value:function(){return this.props.forums?i.a.createElement("div",null,i.a.createElement(k.a,null,i.a.createElement("title",null,"Mosaic Forum")),i.a.createElement(W,null),this.props.children,i.a.createElement(q,null)):i.a.createElement("div",null,"Loading...")}}]),n}(a.Component),Y=Object(u.b)((function(e){return{forums:e.app.forums,currentForum:e.app.currentForum}}),(function(e){return{getForums:function(){e(G())},updateCurrentForum:function(t){e(function(e){return{type:"update_current_forum",payload:e}}(t))},getUser:function(){e(K())}}}))(V),J=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"renderNavLinks",value:function(){return[{name:"Dashboard",link:"/admin"}]}},{key:"render",value:function(){var e=this.props.user,t=e.authenticated,n=e.name,a=e.username,r=e.avatarUrl;return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(x,null),"Welcome Admin",i.a.createElement(N,{signedIn:t,userName:n||a,gitHandler:a,avatar:r})),i.a.createElement(B,{navigationLinks:this.renderNavLinks()}))}}]),n}(a.Component),$=Object(u.b)((function(e){return{user:e.user,forums:e.app.forums}}))(J),X=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"componentDidMount",value:function(){this.props.getUser()}},{key:"render",value:function(){var e=this.props.user;return e.fetchingUser?i.a.createElement("div",{style:{textAlign:"center",marginTop:20}},"Loading users profile..."):"admin"===e.role?i.a.createElement("div",null,i.a.createElement(k.a,null,i.a.createElement("title",null,"ReForum | Admin")),i.a.createElement($,null),this.props.children):i.a.createElement("div",{style:{textAlign:"center",marginTop:20}},"We are cordially sorry that you are not allowed to view admin panel!",i.a.createElement("br",null),"Please go back to ",i.a.createElement(s.c,{to:"/"},"root")," page.")}}]),n}(a.Component),Z=Object(u.b)((function(e){return{user:e.user}}),(function(e){return{getUser:function(){e(K())}}}))(X),Q=function(){return T.a.get("/api/admin/admin_dashboard_info")},ee=function(e){return function(t,n){t({type:"create_forum"}),function(e){var t=new FormData;return t.append("img",e.mosaicImage),t.append("title",e.title),t.append("slug",e.slug),T.a.post("/api/admin/create_forum",t,{headers:{"Content-Type":"multipart/form-data"}})}(e).then((function(e){Q().then((function(n){t({type:"get_all_info_success",payload:n.data}),e.data.created?t({type:"create_forum_success"}):t({type:"create_forum_failure"})}),(function(e){return t({type:"fetching_discussions_failure",payload:e})}))}),(function(e){return t({type:"create_forum_failure"})}))}},te=function(e){return function(t,n){var a;t({type:"delete_forum"}),(a=e,T.a.post("/api/admin/delete_forum",{forum_id:a})).then((function(e){t({type:"get_all_info_start"}),Q().then((function(n){t({type:"get_all_info_success",payload:n.data}),e.data.deleted?t({type:"delete_forum_success"}):t({type:"delete_forum_failure"})}),(function(e){return t({type:"fetching_discussions_failure",payload:e})}))}),(function(e){return t({type:"delete_forum_failure"})}))}},ne=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.count,n=e.label;return i.a.createElement("div",null,i.a.createElement("div",null,t),i.a.createElement("div",null,n))}}]),n}(a.Component);ne.defaultProps={count:0,label:"default"};var ae=ne,ie=n(31),re=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.type,e.fullWidth,e.noUppercase,e.className,e.style),n=e.onClick;e.alwaysActive;return i.a.createElement("button",{onClick:n,style:t},this.props.children)}}]),n}(a.Component);re.defaultProps={type:"default",fullWidth:!1,noUppercase:!1,alwaysActive:!1,className:"",style:{},onClick:function(){}};var oe=re,se=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(E.a)(this,n),(a=t.call(this,e)).state={newForumTitle:"",newForumSlug:"",errorMsg:null,mosaicImage:null},a.handleCreateForum=a.handleCreateForum.bind(Object(ie.a)(a)),a}return Object(O.a)(n,[{key:"handleCreateForum",value:function(){this.setState({errorMsg:null});var e=this.state,t=e.newForumTitle,n=e.newForumSlug,a=e.mosaicImage,i=null,r=null;if(""===t)return this.setState({errorMsg:"Forum title is empty. Please provide a valid Forum Title."});if((i=t.trim()).length<4)return this.setState({errorMsg:"Forum title should have at least 4 charecters."});if(!a)return this.setState({errorMsg:"Select an image for mosaic."});if(""===r)return this.setState({errorMsg:"Forum slug is empty. Please provide a valid Forum Slug."});return(r=n.match(/^[a-z\_]+$/)?n:null)&&r.length<4?this.setState({errorMsg:"Forum slug should have at least 4 charecters."}):i?r?void(i&&r&&this.props.createAction({title:i,slug:r,mosaicImage:a})):this.setState({errorMsg:"Please provide a valid Forum Slug. Slug can only contain small case alphabets and underscore."}):this.setState({errorMsg:"Please provide a valid Forum Title."})}},{key:"render",value:function(){var e=this,t=this.props,n=t.forums,a=t.creatingForum,r=t.deleteAction,o=t.deletingForum,s=this.state,u=(s.newForumTitle,s.newForumSlug,s.errorMsg);return i.a.createElement("div",null,i.a.createElement("div",null,"Current Forums"),i.a.createElement("div",null,o&&i.a.createElement("div",null,"Removing forum, please wait..."),n.map((function(e){return i.a.createElement("div",{key:e.id},i.a.createElement("div",null,e.name),i.a.createElement("div",null,"(",e.slug,")"),i.a.createElement("div",null,i.a.createElement(oe,{onClick:function(){r(e.id)}},"Remove")))}))),i.a.createElement("div",null,a&&i.a.createElement("div",null,"Creating forum, please wait..."),i.a.createElement("div",null,"Create New Forum"),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,"Title: "),i.a.createElement("input",{type:"text",placeholder:"Forum Title",onChange:function(t){e.setState({newForumTitle:t.target.value})}})),i.a.createElement("div",null,i.a.createElement("div",null,"Slug: "),i.a.createElement("input",{type:"text",placeholder:"forum_slug",onChange:function(t){e.setState({newForumSlug:t.target.value})}})),i.a.createElement("div",null,i.a.createElement("div",null,"Mosaic Image: "),i.a.createElement("input",{type:"file",accept:"image/jpeg",name:"img",onChange:function(t){e.setState({mosaicImage:t.target.files[0]})}})),i.a.createElement(oe,{onClick:this.handleCreateForum},"Create")),u&&i.a.createElement("div",null,u)))}}]),n}(a.Component);se.defaultProps={};var ue=se,le=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"componentDidMount",value:function(){this.props.getAdminDashboardInfo()}},{key:"render",value:function(){var e=this,t=this.props.adminInfo.info,n=t.discussionCount,a=t.opinionCount,r=t.forumCount,o=t.userCount,s=t.forums,u=this.props,l=u.loadingInfo,c=u.creatingForum,d=u.creatingForumError,p=u.deletingForum,m=u.deletingForumError,f=s.map((function(e){return{id:e._id,name:e.forum_name,slug:e.forum_slug}}));return i.a.createElement("div",null,l&&i.a.createElement("div",null,"Loading dashboard info..."),i.a.createElement("div",null,i.a.createElement(ae,{label:"Users",count:o}),i.a.createElement(ae,{label:"Discussions",count:n}),i.a.createElement(ae,{label:"Opinions",count:a}),i.a.createElement(ae,{label:"Forums",count:r})),i.a.createElement(ue,{forums:f,deletingForum:p,deleteAction:function(t){e.props.deleteForum(t)},creatingForum:c,createAction:function(t){e.props.createForum(t)}}),d&&i.a.createElement("div",null,d),m&&i.a.createElement("div",null,m))}}]),n}(a.Component),ce=Object(u.b)((function(e){return{adminInfo:e.adminInfo,loadingInfo:e.adminInfo.loadingInfo,creatingForum:e.adminInfo.creatingForum,creatingForumError:e.adminInfo.creatingForumError,deletingForum:e.adminInfo.deletingForum,deletingForumError:e.adminInfo.deletingForumError}}),(function(e){return{getAdminDashboardInfo:function(){e((function(e,t){e({type:"get_all_info_start"}),Q().then((function(t){return e({type:"get_all_info_success",payload:t.data})}),(function(t){return e({type:"fetching_discussions_failure",payload:t})}))}))},getForums:function(){e(G())},deleteForum:function(t){e(te(t))},createForum:function(t){e(ee(t))}}}))(le),de=n(96),pe=n(114),me=n(318),fe=n(324),ge=n(319),he=n(177),ve=n(326),ye=n(320),_e=function(e,t){return T.a.get("/api/forum/".concat(e,"/discussions?sorting_method=").concat(t))},be=function(e,t){return function(n,a){if(t&&n({type:"start_fetching_pinned_discussions"}),e)return(i=e,T.a.get("/api/forum/".concat(i,"/pinned_discussions"))).then((function(e){return n({type:"fetching_pinned_discussions_success",payload:e.data})}),(function(e){console.log(e),n({type:"fetching_pinned_discussions_failure"})}));var i;n({type:"invalid_forum"})}},Ee=n(34),Oe=n.n(Ee),je=n(180),Ce=function(e){return T.a.get("/api/discussion/".concat(e))},ke=function(e){return function(t,n){var a;t({type:"toggle_favorite_start"}),(a=e,T.a.put("/api/discussion/toggleFavorite/".concat(a))).then((function(e){e.data._id?(t({type:"toggle_favorite_success"}),t({type:"fetching_single_discussion_success",payload:e.data})):t({type:"toggle_favorite_failure"})}),(function(e){return t({type:"toggle_favorite_failure"})}))}},Fe=function(e,t){return function(n,a){n({type:"posting_opinion_start"}),!e.content||e.content.length<20?n({type:"posting_opinion_failure",payload:"Please provide a bit more info in your opinion....at least 20 characters."}):function(e){return T.a.post("/api/opinion/newOpinion",e)}(e).then((function(e){e.data._id?Ce(t).then((function(e){n({type:"fetching_single_discussion_success",payload:e.data}),n({type:"posting_opinion_success"})}),(function(e){return n({type:"fetching_single_discussion_failure"})})):n({type:"posting_opinion_failure"})}),(function(e){return n({type:"posting_opinion_failure"})}))}},De=function(e){return function(t,n){t({type:"delete_disc_start"}),function(e){return T.a.delete("/api/discussion/deleteDiscussion/".concat(e))}(e).then((function(e){e.data.deleted?t({type:"delete_disc_success"}):t({type:"delete_disc_failure"})}),(function(e){return t({type:"delete_disc_failure"})}))}},Se=function(e,t){return function(n,a){n({type:"delete_opinion_start",payload:e}),function(e){return T.a.delete("/api/opinion/deleteOpinion/".concat(e))}(e).then((function(e){e.data.deleted?Ce(t).then((function(e){n({type:"delete_opinion_success"}),n({type:"fetching_single_discussion_success",payload:e.data})}),(function(e){return n({type:"fetching_single_discussion_failure"})})):n({type:"delete_opinion_failure"})}),(function(e){return n({type:"delete_opinion_failure"})}))}},we=n(40),Ie=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){var e;return Object(E.a)(this,n),(e=t.call(this)).onToggle=function(t){t.preventDefault(),e.props.onToggle(e.props.style)},e}return Object(O.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{onMouseDown:this.onToggle},this.props.label)}}]),n}(i.a.Component),Pe=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onToggle,n=e.editorState,a=(e.type,n.getSelection()),r=n.getCurrentContent().getBlockForKey(a.getStartKey()).getType();return i.a.createElement("div",null,[{label:"H3",style:"header-three"},{label:"H4",style:"header-four"},{label:"H5",style:"header-five"},{label:"Blockquote",style:"blockquote"},{label:"Code Block",style:"code-block"}].map((function(e){return i.a.createElement(Ie,{key:e.label,onToggle:t,active:e.style===r,label:e.label,style:e.style})})))}}]),n}(a.Component),Me=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onToggle,n=e.editorState.getCurrentInlineStyle();return i.a.createElement("div",null,[{label:"Bold",style:"BOLD"},{label:"Italic",style:"ITALIC"},{label:"Monospace",style:"CODE"}].map((function(e){return i.a.createElement(Ie,{key:e.label,onToggle:t,active:n.has(e.style),label:e.label,style:e.style})})))}}]),n}(a.Component),Te=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(E.a)(this,n),(a=t.call(this,e)).state={editorState:we.EditorState.createEmpty()},a.focus=function(){return a.refs.editor.focus()},a.onEditorStateChange=a.onEditorStateChange.bind(Object(ie.a)(a)),a.handleKeyCommand=a.handleKeyCommand.bind(Object(ie.a)(a)),a.onTab=a.onTab.bind(Object(ie.a)(a)),a.toggleBlockType=a.toggleBlockType.bind(Object(ie.a)(a)),a.toggleInlineStyle=a.toggleInlineStyle.bind(Object(ie.a)(a)),a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.value;if(e){var t=Object(we.convertFromRaw)(JSON.parse(e)),n=we.EditorState.createWithContent(t);this.setState({editorState:n})}}},{key:"onEditorStateChange",value:function(e){var t=this.props.onChange;this.setState({editorState:e}),t(JSON.stringify(Object(we.convertToRaw)(e.getCurrentContent())))}},{key:"handleKeyCommand",value:function(e){var t=we.RichUtils.handleKeyCommand(this.state.editorState,e);return!!t&&(this.onEditorStateChange(t),!0)}},{key:"onTab",value:function(e){this.onEditorStateChange(we.RichUtils.onTab(e,this.state.editorState,4))}},{key:"toggleBlockType",value:function(e){this.onEditorStateChange(we.RichUtils.toggleBlockType(this.state.editorState,e))}},{key:"toggleInlineStyle",value:function(e){this.onEditorStateChange(we.RichUtils.toggleInlineStyle(this.state.editorState,e))}},{key:"customBlockStyles",value:function(e){e.getType()}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.onSave,a=e.readOnly,r="";"newOpinion"===t&&(r="Reply"),"newDiscussion"===t&&(r="Post Discussion");var o="";return"newOpinion"===t&&(o="Your opinion..."),"newDiscussion"===t&&(o="Discussion summary..."),i.a.createElement("div",null,!a&&i.a.createElement("div",null,i.a.createElement(Me,{type:t,editorState:this.state.editorState,onToggle:this.toggleInlineStyle}),i.a.createElement(Pe,{type:t,editorState:this.state.editorState,onToggle:this.toggleBlockType})),i.a.createElement("div",{onClick:this.focus},i.a.createElement(we.Editor,{customStyleMap:{CODE:{color:"#e74c3c",backgroundColor:"#f9f9f9",border:"1px solid #e8e8e8",fontFamily:"monospace",padding:"2px 5px",margin:"0px 5px"}},blockStyleFn:this.customBlockStyles,readOnly:a,editorState:this.state.editorState,onChange:this.onEditorStateChange,placeholder:o,handleKeyCommand:this.handleKeyCommand,onTab:this.onTab,ref:"editor"})),!a&&i.a.createElement(oe,{noUppercase:!0,style:{alignSelf:"center"},onClick:n},r))}}]),n}(a.Component);Te.defaultProps={readOnly:!1,value:null,type:"newDiscussion",onChange:function(){},onSave:function(){}};var Ue=Te,Ne=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.userAvatar,a=e.userName,r=(e.userGitHandler,e.discTitle),o=e.discDate,s=e.discContent,u=(e.tags,e.favoriteCount),l=e.favoriteAction,c=e.userFavorited,d=e.toggleingFavorite,p=e.allowDelete,m=e.deletingDiscussion,f=e.deleteAction,g=Oe()(o);g=g.from(Oe()());var h="";return h=d?"Toggling Favorite...":c?"Favorited (".concat(u,")"):0===u?"Make favorite":1===u?"1 favorite":"".concat(u," favorites"),i.a.createElement("section",{className:"single-discussion"},i.a.createElement("section",{className:"single-discussion__header d-flex"},i.a.createElement(P.a,{src:n,roundedCircle:!0}),i.a.createElement("div",{className:"d-flex flex-column justify-content-center"},i.a.createElement("span",null,a),i.a.createElement("span",{className:"text-muted"},g))),i.a.createElement("div",null,r),i.a.createElement("div",null,i.a.createElement(Ue,{readOnly:!0,value:s})),i.a.createElement("div",null,i.a.createElement(oe,{noUppercase:!0,onClick:function(){!d&&l(t)}},i.a.createElement("i",null),i.a.createElement("span",null,h)),p&&i.a.createElement(oe,{noUppercase:!0,onClick:function(){f()}},i.a.createElement("i",null),i.a.createElement("span",null,"Delete"))),m&&i.a.createElement("div",null,"Deleting Discussion..."))}}]),n}(a.Component);Ne.defaultProps={id:0,userAvatar:null,userName:"User name",userGitHandler:"github",discTitle:"Default Discussion Title",discDate:"a day ago",discContent:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",tags:["react","redux","webkit"],favoriteCount:1,favoriteAction:function(){},userFavorited:!1,toggleingFavorite:!1,allowDelete:!1,deletingDiscussion:!1,deleteAction:function(){}};var xe=Ne,Le=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.posting,n=e.onSubmit,a=e.onChange;return t?i.a.createElement("div",null,"Posting your opinion..."):i.a.createElement(Ue,{type:"newOpinion",onSave:n,onChange:a})}}]),n}(a.Component);Le.defaultProps={posting:!1,onSubmit:function(){},onChange:function(e){}};var Ae=Le,Re=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.opinionId,n=e.userAvatar,a=e.userName,r=e.userGitHandler,o=e.opDate,u=e.opContent,l=e.userId,c=e.currentUserId,d=e.currentUserRole,p=e.deleteAction,m=e.deletingOpinion,f=Oe()(o);f=f.from(Oe()());var g=l===c||"admin"===d;return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("img",{src:n}),i.a.createElement("div",null,i.a.createElement(s.c,{to:"/user/".concat(r)},a||r),i.a.createElement("a",{href:"https://www.github.com/".concat(r),target:"_blank"},i.a.createElement("i",null),i.a.createElement("span",null,r))),i.a.createElement("div",null,f),g&&i.a.createElement(oe,{noUppercase:!0,onClick:function(){p(t)}},i.a.createElement("i",null),i.a.createElement("span",null,"Delete"))),i.a.createElement("div",null,i.a.createElement(Ue,{readOnly:!0,value:u})),m===t&&i.a.createElement("div",null,"Deleting Opinion ..."))}}]),n}(a.Component);Re.defaultProps={opinionId:"12345",userAvatar:null,userName:"User name",userGitHandler:"github",opDate:"a day ago",opContent:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",userId:"12345",currentUserId:"12345",currentUserRole:"user",deleteAction:function(){},deletingOpinion:null};var Be=Re,He=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(E.a)(this,n),(a=t.call(this,e)).state={opinionContent:""},a}return Object(O.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.deletedDiscussion,n=e.deletedDiscussionRedirect,a=this.props.params.forum;t&&(s.f.push("/".concat(a)),setTimeout((function(){n()}),100))}},{key:"componentWillUnmount",value:function(){this.props.updateOpinionContent(null)}},{key:"userFavoritedDiscussion",value:function(e,t){for(var n=!1,a=0;a<t.length;a++)t[a]===e&&(n=!0);return n}},{key:"handleReplySubmit",value:function(){var e=this.props,t=e.forums,n=e.postOpinion,a=e.discussion,i=e.opinionContent,r=e.userId,o=this.props.params.discussion,s=this.props.params.forum;n({forum_id:A.a.find(t,{forum_slug:s})._id,discussion_id:a._id,user_id:r,content:i},o)}},{key:"deleteDiscussion",value:function(){var e=this.props.params.discussion;(0,this.props.deletePost)(e)}},{key:"deleteOpinion",value:function(e){var t=this.props.params.discussion,n=this.props.deleteOpinion;n(e,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.discussion,a=t.toggleFavorite,r=t.toggleingFavorite,o=t.updateOpinionContent,s=t.postingOpinion,u=t.opinionError,l=t.deletingOpinion,c=t.deletingDiscussion,d=n._id,p=n.content,m=n.date,f=n.favorites,g=n.title,h=n.tags,v=n.opinions,y=n.user,_=y.avatarUrl,b=y.name,E=y.username,O=!1;n.user._id!==this.props.userId&&"admin"!==this.props.userRole||(O=!0);var j=this.userFavoritedDiscussion(this.props.userId,f);return i.a.createElement("div",null,i.a.createElement(xe,{id:d,userAvatar:_,userName:b||E,userGitHandler:E,discTitle:g,discDate:m,discContent:p,tags:h,favoriteCount:f.length,favoriteAction:a,userFavorited:j,toggleingFavorite:r,allowDelete:O,deletingDiscussion:c,deleteAction:this.deleteDiscussion.bind(this)}),u&&i.a.createElement("div",null,u),i.a.createElement(Ae,{posting:s,onSubmit:this.handleReplySubmit.bind(this),onChange:function(e){o(e)}}),v&&v.map((function(t){return i.a.createElement(Be,{key:t._id,opinionId:t._id,userAvatar:t.user.avatarUrl,userName:t.user.name,userGitHandler:t.user.username,opDate:t.date,opContent:t.content,userId:t.user_id,currentUserId:e.props.userId,currentUserRole:e.props.userRole,deleteAction:e.deleteOpinion.bind(e),deletingOpinion:l})})))}}]),n}(a.Component),We=Object(u.b)((function(e){return{forums:e.app.forums,userId:e.user._id,userRole:e.user.role,toggleingFavorite:e.discussion.toggleingFavorite,deletingDiscussion:e.discussion.deletingDiscussion,deletedDiscussion:e.discussion.deletedDiscussion,opinionContent:e.discussion.opinionContent,postingOpinion:e.discussion.postingOpinion,opinionError:e.discussion.opinionError,deletingOpinion:e.discussion.deletingOpinion,error:e.discussion.error}}),(function(e){return{toggleFavorite:function(t){e(ke(t))},updateOpinionContent:function(t){e({type:"update_opinion_content",payload:t})},postOpinion:function(t,n){e(Fe(t,n))},deletePost:function(t){e(De(t))},deletedDiscussionRedirect:function(){e((function(e,t){e({type:"delete_disc_redirect"})}))},deleteOpinion:function(t,n){e(Se(t,n))}}}))(He);function ze(e){var t=Object(a.useState)(!1),n=Object(je.a)(t,2),r=n[0],o=n[1],u=e.discussion.user,l=(e.discussion.user.username,e.discussion.title),c=e.discussion.content,d=e.discussion.date,p=(e.discussion.tags,e.discussion.opinion_count,e.discussion.favorites.length),m=e.discussion,f=e.discussionType,g=Oe()(d).from(Oe()());return i.a.createElement(ve.a,{className:"discussion-box"},i.a.createElement(ve.a.Body,null,i.a.createElement("section",{className:"discussion-box__header d-flex"},i.a.createElement(P.a,{src:u.avatarUrl,roundedCircle:!0}),i.a.createElement("div",{className:"d-flex flex-column justify-content-center"},i.a.createElement("span",null,u.name||u.username," ","pinned"===f?i.a.createElement("span",{className:"rectangle"},"Featured"):null),i.a.createElement("span",{className:"text-muted"},u.role," - ",g))),i.a.createElement(P.a,{src:"data:image/jpeg;base64,"+m.base64,fluid:!0}),i.a.createElement(ve.a.Text,null,c.text),i.a.createElement(I.a,{onClick:function(){return o(!0)}},"Large modal"),i.a.createElement(ve.a.Footer,null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(s.c,{to:""},l)),i.a.createElement("div",null,i.a.createElement("span",null,p," favorites"))))),i.a.createElement(ye.a,{size:"lg",show:r,onHide:function(){return o(!1)},"aria-labelledby":"example-modal-sizes-title-lg"},i.a.createElement(ye.a.Header,{closeButton:!0},i.a.createElement(ye.a.Title,{id:"example-modal-sizes-title-lg"},"Large Modal")),i.a.createElement(ye.a.Body,null,i.a.createElement(We,{discussion:m}))))}ze.defaultProps={discussionId:1,voteCount:20,user:{},userGitHandler:"github",discussionTitle:"This is a default post title",time:Oe()(),opinionCount:12,tags:["react","redux","nodejs"],link:"",userProfile:!1};var qe=ze,Ge=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"renderSort",value:function(){var e=this.props,t=(e.activeSortingMethod,e.onChangeSortingMethod);return"general"===this.props.type?i.a.createElement("div",null,i.a.createElement("span",{onClick:function(){return t("date")}},"Latest"),i.a.createElement("span",{onClick:function(){return t("popularity")}},"Popular")):null}},{key:"renderEmptyDiscussionLine",value:function(e,t){if(!e&&(!t||0===t.length))return i.a.createElement("div",null,"No discussions...")}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.loading,a=e.discussions,r=(e.currentForum,e.userProfile),o="";return"general"===t&&(o="Discussions"),"pinned"===t&&(o="Pinned"),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("span",null,o),!r&&this.renderSort()),n&&i.a.createElement("div",null,"Loading..."),this.renderEmptyDiscussionLine(n,a),!n&&i.a.createElement("div",null,a&&a.map((function(e){return i.a.createElement(qe,{discussion:e,userProfile:r,discussionType:t,key:e._id})}))))}}]),n}(a.Component);Ge.defaultProps={type:"general",loading:!1,discussions:[],currentForum:"general",activeSortingMethod:"date",onChangeSortingMethod:function(e){},userProfile:!1};var Ke=Ge,Ve=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props.currentForum;return i.a.createElement("div",null,i.a.createElement(s.c,{to:"/".concat(e,"/new_discussion")},i.a.createElement(oe,{type:"outline",fullWidth:!0,noUppercase:!0},"New Discussion")))}}]),n}(a.Component);Ve.defaultProps={currentForum:"general"};var Ye,Je=Ve,$e=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(E.a)(this,n),(a=t.call(this,e)).setImageModalPopover=function(e){a.setState({imageOnModal:a.state.loadedEncodedImages[e],loadingImage:!1})},a.closeModal=function(){a.setState({showModal:!1})},a.getIndividualImage=function(e,t){for(var n in a.state.coordinates){var i=n.split("-"),r=parseInt(i[0]),o=parseInt(i[1]);if(e>=r&&e<=r+a.state.tileSize&&t>=o&&t<=o+a.state.tileSize)if("break"===function(){var e=a.state.coordinates[n];return Object.keys(a.state.loadedEncodedImages).includes(e)&&a.state.loadedEncodedImages[e]?a.setImageModalPopover(e):a.setState({loadingImage:!0},(function(){T.a.get("/api/forum/tile?tileFileName="+e+"&forumId="+a.state.currentForumId).then((function(t){a.setState({loadedEncodedImages:Object(pe.a)(Object(pe.a)({},a.state.loadedEncodedImages),{},Object(de.a)({},e,t.data.base64))},(function(){return a.setImageModalPopover(e)}))})).catch((function(e){return console.error(e)}))})),"break"}())break}},a.getCoordenate=function(e){if(!a.state.showModal){var t=e.target.getBoundingClientRect(),n=e.clientX,i=e.clientY,r=n-t.left,o=i-t.top;void 0!==Ye&&window.clearTimeout(Ye),Ye=window.setTimeout((function(){a.state.inPopover||a.setState({x:n,y:i},(function(){return a.getIndividualImage(r,o)}))}),500)}},a.drawImage=function(e){var t=a.canvas.current.getContext("2d"),n=new Image,i=Object(ie.a)(a);n.onload=function(){var n=this,a={canvasWidth:this.width,canvasHeight:this.height,loading:!1,coordinates:e.mosaic.coordinates,tileSize:parseInt(e.mosaic.tile_size)};i.setState(a,(function(){i.canvas.current.width=i.state.canvasWidth,i.canvas.current.height=i.state.canvasHeight,t.drawImage(n,0,0,n.width,n.height)}))},n.src="data:image/jpeg;base64,"+e.mosaic.base64},a.state={loading:!1,canvasHeight:0,canvasWidth:0,coordinates:null,loadedEncodedImages:{},showModal:!1,imageOnModal:"",showUploadTilesButton:!1,showUploadMosaicImageButton:!1,toUploadTilesList:null,toUploadMosaicList:null,showSuccessMessage:!1,successMessage:"",tileSize:null,timesWider:"1",widthHeight:"3",quality:100,showTooltip:!1,currentForumId:null},a.canvas=i.a.createRef(),a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.currentForumId,a=t.getDiscussions,i=t.getPinnedDiscussions,r=t.getCurrentForum;a(n()),i(n());var o=r();o&&this.setState({currentForumObj:o},(function(){o.mosaic&&e.setState({currentForumId:o._id},(function(){return e.drawImage(o)}))}))}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,a=n.currentForum,i=n.currentForumId,r=n.getDiscussions,o=n.getPinnedDiscussions,s=n.getCurrentForum;if(e.currentForum!==a){r(i(),!0),o(i(),!0);var u=s();u&&this.setState({currentForumObj:u},(function(){u.mosaic&&t.setState({currentForumId:u._id},(function(){return t.drawImage(u)}))}))}}},{key:"handleSortingChange",value:function(e){var t=this.props,n=t.currentForum,a=t.getDiscussions,i=t.updateSortingMethod;t.sortingMethod!==e&&(i(e),a(n,!1,!0))}},{key:"renderNewDiscussionButtion",value:function(){var e=this.props.currentForum;return i.a.createElement("div",null,i.a.createElement(s.c,{to:"/".concat(e,"/new_discussion")},i.a.createElement(oe,{type:"outline",fullWidth:!0,noUppercase:!0},"New Discussion")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentForum,a=t.discussions,r=t.fetchingDiscussions,o=t.pinnedDiscussions,s=t.fetchingPinnedDiscussions,u=t.sortingMethod,l=t.error;return l?i.a.createElement("div",null,l):i.a.createElement("section",{className:"forum-feed"},i.a.createElement(k.a,null,i.a.createElement("title",null,"Mosaic Forum | ".concat(n))),i.a.createElement(me.a,{className:"forum-feed__canvas-container",fluid:!0},i.a.createElement(me.a,null,i.a.createElement(fe.a,{placement:"right",style:{display:this.state.loading||!this.state.coordinates?"none":"block",top:this.state.y,left:this.state.x},onClick:function(){return e.setState({showModal:!0})},onMouseOut:function(){return e.setState({inPopover:!1})},onMouseOver:function(){return e.setState({inPopover:!0})}},i.a.createElement(fe.a.Content,null,this.state.loadingImage?i.a.createElement("div",{className:"d-flex mt-2 justify-content-center align-items-center"},i.a.createElement("div",{className:"spinner-border",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading..."))):i.a.createElement(P.a,{src:"data:image/jpeg;base64, "+this.state.imageOnModal,thumbnail:!0}))),i.a.createElement("canvas",{onMouseMove:this.getCoordenate,ref:this.canvas}))),i.a.createElement(me.a,{style:{display:"none"}},i.a.createElement(ge.a,null,i.a.createElement(he.a,{md:"8"},i.a.createElement(Ke,{type:"pinned",loading:s,discussions:o,currentForum:n}),i.a.createElement(Ke,{type:"general",loading:r,discussions:a,currentForum:n,onChangeSortingMethod:this.handleSortingChange.bind(this),activeSortingMethod:u}),this.renderNewDiscussionButtion()),i.a.createElement(he.a,{md:"4"},i.a.createElement(ve.a,{className:"mb-3"},i.a.createElement(ve.a.Header,null,"Mosaic Overview"),i.a.createElement(ve.a.Body,null,i.a.createElement(ve.a.Text,null,this.state.currentForumObj?i.a.createElement(P.a,{src:"data:image/jpeg;base64, "+this.state.currentForumObj.base64,fluid:!0}):null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc et nibh a risus sodales faucibus id sed nulla. Nam erat mi, volutpat id lobortis in, congue nec ante. Proin eu enim sed enim molestie accumsan fermentum at nisi. Donec et ultrices nulla. In et euismod odio, in consectetur tellus. Maecenas a vulputate orci. Proin venenatis hendrerit urna."))),i.a.createElement(ve.a,null,i.a.createElement(ve.a.Header,null,"Featured"),i.a.createElement(ve.a.Body,null,i.a.createElement(ve.a.Title,null,"Special title treatment"),i.a.createElement(ve.a.Text,null,"With supporting text below as a natural lead-in to additional content.")))))),i.a.createElement("div",{style:{display:"none"}},i.a.createElement(Je,{currentForum:n})),i.a.createElement(ye.a,{size:"xl",show:this.state.showModal,onHide:this.closeModal},i.a.createElement(ye.a.Header,{closeButton:!0}),i.a.createElement(ye.a.Body,{className:"text-center"},i.a.createElement("div",{className:"tile-image-container",style:{height:"100%",backgroundImage:'url("data:image/jpeg;base64, '+this.state.imageOnModal+'")',backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center"}})),i.a.createElement(ye.a.Footer,null,i.a.createElement(I.a,{variant:"secondary",onClick:this.closeModal},"Close"))))}}]),n}(a.Component),Xe=Object(u.b)((function(e){return{currentForum:e.app.currentForum,currentForumId:function(){var t=A.a.find(e.app.forums,{forum_slug:e.app.currentForum});return t?t._id:null},getCurrentForum:function(){var t=A.a.find(e.app.forums,{forum_slug:e.app.currentForum});return t||null},fetchingDiscussions:e.feed.fetchingDiscussions,discussions:e.feed.discussions,fetchingPinnedDiscussions:e.feed.fetchingPinnedDiscussions,sortingMethod:e.feed.sortingMethod,pinnedDiscussions:e.feed.pinnedDiscussions,error:e.feed.error}}),(function(e){return{getDiscussions:function(t,n,a,i){e(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(a,i){var r=i().feed.sortingMethod;(t||n)&&a({type:"start_fetching_discussions"}),e?_e(e,r).then((function(e){return a({type:"fetching_discussions_success",payload:e.data})}),(function(e){return a({type:"fetching_discussions_failure"})})):a({type:"invalid_forum"})}}(t,n,a,i))},getPinnedDiscussions:function(t,n){e(be(t,n))},updateSortingMethod:function(t){e(function(e){return{type:"update_sorting_method",payload:e}}(t))}}}))($e),Ze=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(E.a)(this,n),(a=t.call(this,e)).state={value:!1},a}return Object(O.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.value;this.setState({value:t})}},{key:"updateValue",value:function(e){this.props.onChange(e),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=this.state.value;return i.a.createElement("div",null,i.a.createElement("div",null,"Is it a pinned discussion?"),i.a.createElement("div",null,i.a.createElement(oe,{alwaysActive:!!t,onClick:function(){e.updateValue(!0)}},"Yes"),i.a.createElement(oe,{alwaysActive:!t,onClick:function(){e.updateValue(!1)}},"No")))}}]),n}(a.Component);Ze.defaultProps={onChange:function(e){},value:!1};var Qe=Ze,et=n(115),tt=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.withRemove,a=e.removeAction;return i.a.createElement("div",null,t,n&&i.a.createElement(oe,{onClick:a},i.a.createElement("i",null)))}}]),n}(a.Component);tt.defaultProps={name:"",withRemove:!1,removeAction:function(){}};var nt=tt,at=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(E.a)(this,n),(a=t.call(this,e)).state={errorMsg:null,tags:[],tagName:""},a}return Object(O.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.value;this.setState({tags:t,errorMsg:null})}},{key:"validateTag",value:function(e){return/^[a-z0-9.\-_$@*!]{4,20}$/.test(e)}},{key:"sameTag",value:function(e){var t=this.state.tags,n=!1;return t.map((function(t){t===e&&(n=!0)})),n}},{key:"addTag",value:function(){var e=this.state,t=e.tagName,n=e.tags;e.errorMsg;if(this.validateTag(t))if(this.sameTag(t))this.setState({errorMsg:"Same tag!!!"});else{var a=n.concat(t);this.setState({tags:a,errorMsg:null,tagName:""}),this.props.onChange(a)}else this.setState({errorMsg:"Tags can only contain small letters and numbers. No space or special characters please. Min 4 and max 20 chars."})}},{key:"removeTag",value:function(e){var t=this.state.tags,n=[].concat(Object(et.a)(t.slice(0,e)),Object(et.a)(t.slice(e+1,t.length)));this.setState({tags:n}),this.props.onChange(n)}},{key:"renderTags",value:function(){var e=this;return this.state.tags.map((function(t,n){return i.a.createElement(nt,{name:t,key:t,withRemove:!0,removeAction:function(){e.removeTag(n)}})}))}},{key:"renderInput",value:function(){var e=this,t=this.state,n=t.tagName,a=t.tags,r=this.props.maxTagCount;return a.length<r?i.a.createElement("div",null,i.a.createElement("input",{placeholder:"tag name...",value:n,onChange:function(t){e.setState({tagName:t.target.value})}}),i.a.createElement(oe,{onClick:function(){e.addTag()}},i.a.createElement("i",null))):null}},{key:"render",value:function(){var e=this.state,t=e.errorMsg;e.tagName,e.tags,this.props.maxTagCount;return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,"Tags :"),this.renderTags(),this.renderInput()),t&&i.a.createElement("div",null,t))}}]),n}(a.Component);at.defaultProps={value:[],maxTagCount:3,onChange:function(e){}};var it=at,rt=function(e,t,n){return function(a,i){a({type:"posting_discussion_start"});var r=i().newDiscussion,o=r.title,u=r.tile,l=r.content,c=r.tags,d=r.pinned,p=!0;return e&&t?null===o||o.length<15?(p=!1,a({type:"posting_discussion_failure",payload:"Title should be at least 15 characters."})):null===l||0===l.length?(p=!1,a({type:"posting_discussion_failure",payload:"Please write some content before posting."})):void 0===u?(p=!1,a({type:"posting_discussion_failure",payload:"Please add a tile ."})):null===c||0===c.length?(p=!1,a({type:"posting_discussion_failure",payload:"Please provide some tags."})):void(p&&function(e){var t=new FormData;for(var n in e)t.append(n,e[n]);return T.a.post("/api/discussion/newDiscussion",t,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})}({userId:e,forumId:t,title:o,content:l,tags:c,pinned:d,tile:u}).then((function(e){!0===e.data.postCreated?(a({type:"posting_discussion_success"}),setTimeout((function(){a({type:"clear_success_message"})}),2e3),s.f.push("/".concat(n,"/discussion/").concat(e.data.discussion_slug))):a({type:"posting_discussion_failure",payload:"Something is wrong at our server end. Please try again later"})}),(function(e){a({type:"posting_discussion_failure",payload:e})}))):(p=!1,a({type:"posting_discussion_failure",payload:"Something is wrong with user/forum."}))}},ot=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(E.a)(this,n),(a=t.call(this,e)).state={forumId:null,userId:null,fatalError:null,tileImage:null},a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.user,n=e.currentForum,a=e.forums;this.setUserAndForumID(t,a,n)}},{key:"componentWillReceiveProps",value:function(e){var t=e.user,n=e.currentForum,a=e.forums;this.setUserAndForumID(t,a,n)}},{key:"setUserAndForumID",value:function(e,t,n){var a=A.a.find(t,{forum_slug:n});if(a){var i=a._id;this.setState({forumId:i,userId:e._id})}else this.setState({fatalError:"Invalid forum buddy, go for the right one!"})}},{key:"renderEditor",value:function(){var e=this.props.user,t=e.authenticated,n=e.role,a=this.props,r=a.updateDiscussionTitle,o=a.updateDiscussionTile,s=a.updateDiscussionContent,u=a.updateDiscussionPinStatus,l=a.updateDiscussionTags,c=a.postDiscussion,d=a.currentForum,p=this.props.newDiscussion,m=p.title,f=p.content,g=p.tags,h=p.pinned,v=(p.tile,this.state),y=v.forumId,_=v.userId;return t?[i.a.createElement("input",{key:"title",type:"text",placeholder:"Discussion title...",value:m,onChange:function(e){r(e.target.value)}}),"admin"===n&&i.a.createElement(Qe,{key:"pinned",value:h,onChange:function(e){u(e)}}),i.a.createElement(it,{key:"tags",value:g,onChange:function(e){l(e)}}),i.a.createElement(Ue,{key:"content",type:"newDiscussion",value:f,onChange:function(e){s(e)},onSave:function(){c(_,y,d)}}),i.a.createElement("div",{key:"tile"},i.a.createElement("div",null,"Tile Image: "),i.a.createElement("input",{type:"file",accept:"image/jpeg",name:"tile",onChange:function(e){o(e.target.files[0])}}))]:i.a.createElement("div",null,"Please sign in before posting a new discussion.")}},{key:"render",value:function(){var e=this.state.fatalError;if(e)return i.a.createElement("div",null,e);var t=this.props.currentForum,n=this.props.newDiscussion,a=n.errorMsg,r=n.postingSuccess,o=n.postingDiscussion;return i.a.createElement("div",null,i.a.createElement(k.a,null,i.a.createElement("title",null,"ReForum | New Discussion")),i.a.createElement("div",null,"You are creating a new discussion on ",i.a.createElement("span",null,t)," forum."),i.a.createElement("div",null,a),r&&i.a.createElement("div",null,"Your discussion is created :-)"),this.renderEditor(),o&&i.a.createElement("div",null,"Posting discussion..."))}}]),n}(a.Component),st=Object(u.b)((function(e){return{user:e.user,forums:e.app.forums,currentForum:e.app.currentForum,newDiscussion:e.newDiscussion}}),(function(e){return{postDiscussion:function(t,n,a){e(rt(t,n,a))},updateDiscussionTitle:function(t){e(function(e){return{type:"update_discussion_title",payload:e}}(t))},updateDiscussionTile:function(t){e({type:"update_discussion_tile",payload:t})},updateDiscussionContent:function(t){e(function(e){return{type:"update_discussion_content",payload:e}}(t))},updateDiscussionPinStatus:function(t){e(function(e){return{type:"update_discussion_pin_status",payload:e}}(t))},updateDiscussionTags:function(t){e(function(e){return{type:"update_discussion_tags",payload:e}}(t))}}}))(ot),ut=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.gitHandler,a=e.location,r=e.avatarUrl;return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("img",{src:r,alt:"".concat(t," avatar")})),i.a.createElement("div",null,i.a.createElement("div",null,t),i.a.createElement("div",null,i.a.createElement("i",null)," ",n),i.a.createElement("div",null,a)))}}]),n}(a.Component);ut.defaultProps={name:"Hello World",gitHandler:"helloWorld",location:"Somewhere in the world",avatarUrl:"https://google.com"};var lt=ut,ct=function(e){return function(t,n){t({type:"fetch_user_profile_start"}),function(e){return T.a.get("/api/user/profile/".concat(e))}(e).then((function(e){e.data.error?t({type:"fetch_user_profile_failure"}):t({type:"fetch_user_profile_success",payload:e.data})}),(function(e){return t({type:"fetch_user_profile_failure"})}))}},dt=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.fetchUserProfile)(this.props.params.username)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.params.username,n=e.params.username;t!==n&&(0,this.props.fetchUserProfile)(n)}},{key:"render",value:function(){var e=this.props,t=e.fetchingProfile,n=e.profile,a=e.error;if(a)return i.a.createElement("div",null,a);var r=n.name,o=n.username,s=n.avatarUrl,u=n.github,l=n.discussions;return t?i.a.createElement("div",null,"Loading users profile ..."):i.a.createElement("div",null,i.a.createElement(k.a,null,i.a.createElement("title",null,"".concat(r||o," | ReForum"))),i.a.createElement("div",null,i.a.createElement(lt,{name:r,gitHandler:o,location:u.location,avatarUrl:s}),i.a.createElement(Ke,{userProfile:!0,type:"general",discussions:l})))}}]),n}(a.Component),pt=Object(u.b)((function(e){return{fetchingProfile:e.userProfile.fetchingProfile,profile:e.userProfile.profile,error:e.userProfile.error}}),(function(e){return{fetchUserProfile:function(t){e(ct(t))}}}))(dt),mt=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){return i.a.createElement("h3",null,"Coudn't found the url buddy. Please check it out.")}}]),n}(a.Component);o.a.render(i.a.createElement(u.a,{store:b},i.a.createElement(s.e,{history:s.f},i.a.createElement(s.d,{path:"/admin",component:Z},i.a.createElement(s.b,{component:ce})),i.a.createElement(s.d,{path:"/",component:Y},i.a.createElement(s.b,{component:Xe}),i.a.createElement(s.d,{path:":forum",component:Xe}),i.a.createElement(s.d,{path:":forum/discussion/:discussion",component:We}),i.a.createElement(s.d,{path:":forum/new_discussion",component:st}),i.a.createElement(s.d,{path:"user/:username",component:pt}),i.a.createElement(s.d,{path:"*",component:mt})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[183,1,2]]]);
//# sourceMappingURL=main.b181c612.chunk.js.map