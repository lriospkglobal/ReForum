(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{187:function(e,t,n){e.exports=n(316)},221:function(e,t,n){},316:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(26),s=n.n(r),o=n(17),l=n(18);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(48),u=n(172),d={fetchingForums:!1,forums:null,currentForum:"general",error:!1},m={fetchingUser:!0,authenticated:!1,error:null,_id:null,name:null,email:null,username:null,avatarUrl:null,githubUrl:null,githubLocation:null,githubBio:null,role:null},p={fetchingDiscussions:!0,discussions:null,fetchingPinnedDiscussions:!0,pinnedDiscussions:null,sortingMethod:"date",error:null},f={fetchingDiscussion:!0,toggleingFavorite:!1,postingOpinion:!1,opinionContent:null,opinionError:null,deletingDiscussion:!1,deletedDiscussion:!1,deletingOpinion:null,discussion:null,error:null},g={postingSuccess:!1,errorMsg:null,postingDiscussion:!1,title:"",tile:null,content:null,tags:[],pinned:!1},h={loadingInfo:!1,info:{discussionCount:0,opinionCount:0,forumCount:0,userCount:0,forums:[]},error:null,creatingForum:!1,creatingForumError:null,deletingForum:!1,deletingForumError:null},v={fetchingProfile:!0,profile:{},error:null},E=Object(c.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"start_fetching_user":return Object.assign({},e,{fetchUser:!0});case"fetching_user_success":var n=t.payload,a=n._id,i=n.name,r=n.username,s=n.avatarUrl,o=n.email,l=n.githubBio,c=n.githubUrl,u=n.githubLocation,d=n.role;return Object.assign({},e),{fetchingUser:!1,authenticated:!0,error:null,_id:a,name:i,username:r,avatarUrl:s,email:o,githubBio:l,githubUrl:c,githubLocation:u,role:d};case"fetching_user_failure":return Object.assign({},m,{fetchingUser:!1,error:"Unable to fetch user!"});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"start_fetching_forums":return Object.assign({},e,{fetchingForums:!0});case"stop_fetching_forums":return Object.assign({},e,{fetchingForums:!1});case"fetching_forums_success":return Object.assign({},e,{forums:t.payload,fetchingForums:!1,error:!1});case"fetching_forums_failure":return Object.assign({},e,{fetchingForums:!1,error:"Unable to fetch forums"});case"update_current_forum":return Object.assign({},e,{currentForum:t.payload});default:return e}},feed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"start_fetching_discussions":return Object.assign({},e,{fetchingDiscussions:!0,error:null});case"stop_fetching_discussions":return Object.assign({},e,{fetchingDiscussions:!1});case"fetching_discussions_success":return Object.assign({},e,{discussions:t.payload,fetchingDiscussions:!1,error:null});case"fetching_discussions_failure":return Object.assign({},e,{fetchingDiscussions:!1,error:"Unable to fetch discussions at the moment."});case"start_fetching_pinned_discussions":return Object.assign({},e,{fetchingPinnedDiscussions:!0,error:null});case"stop_fetching_pinned_discussions":return Object.assign({},e,{fetchingPinnedDiscussions:!1});case"fetching_pinned_discussions_success":return Object.assign({},e,{pinnedDiscussions:t.payload,fetchingPinnedDiscussions:!1,error:null});case"fetching_pinned_discussions_failure":return Object.assign({},e,{fetchingPinnedDiscussions:!1,error:"Unable to fetch pinned discussions at the moment."});case"update_sorting_method":return Object.assign({},e,{sortingMethod:t.payload});case"invalid_forum":return Object.assign({},e,{error:"Sorry, couldn't find the forum.",fetchingPinnedDiscussions:!1,fetchingDiscussions:!1});default:return e}},discussion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetching_single_discussion_start":return Object.assign({},e,{fetchingDiscussion:!0});case"fetching_single_discussion_end":return Object.assign({},e,{fetchingDiscussion:!1});case"fetching_single_discussion_success":return Object.assign({},e,{discussion:t.payload,fetchingDiscussion:!1,error:null});case"fetching_single_discussion_failure":return Object.assign({},e,{fetchingDiscussion:!1,error:"Unable to fetch discussion. Please check out the url."});case"toggle_favorite_start":return Object.assign({},e,{toggleingFavorite:!0});case"toggle_favorite_success":case"toggle_favorite_failure":return Object.assign({},e,{toggleingFavorite:!1});case"update_opinion_content":return Object.assign({},e,{opinionContent:t.payload});case"posting_opinion_start":return Object.assign({},e,{postingOpinion:!0,opinionError:null});case"posting_opinion_success":return Object.assign({},e,{postingOpinion:!1,opinionContent:null,opinionError:null});case"posting_opinion_failure":return Object.assign({},e,{postingOpinion:!1,opinionContent:null,opinionError:t.payload});case"delete_disc_start":return Object.assign({},e,{deletingDiscussion:!0});case"delete_disc_success":return Object.assign({},e,{deletingDiscussion:!1,deletedDiscussion:!0});case"delete_disc_failure":return Object.assign({},e,{deletingDiscussion:!1,deletedDiscussion:!1});case"delete_disc_redirect":return Object.assign({},e,{deletedDiscussion:!1});case"delete_opinion_start":return Object.assign({},e,{deletingOpinion:t.payload});case"delete_opinion_success":case"delete_opinion_failure":return Object.assign({},e,{deletingOpinion:null});default:return e}},newDiscussion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"posting_discussion_start":return Object.assign({},e,{postingDiscussion:!0});case"posting_discussion_success":return Object.assign({},g,{postingSuccess:!0,postingDiscussion:!1,errorMsg:null});case"posting_discussion_failure":return Object.assign({},e,{postingSuccess:!1,postingDiscussion:!1,errorMsg:t.payload||"Unable to post discussion."});case"clear_success_message":return Object.assign({},g,{postingSuccess:!1});case"update_discussion_title":return Object.assign({},e,{title:t.payload});case"update_discussion_content":return Object.assign({},e,{content:t.payload});case"update_discussion_tile":return Object.assign({},e,{tile:t.payload});case"update_discussion_pin_status":return Object.assign({},e,{pinned:t.payload});case"update_discussion_tags":return Object.assign({},e,{tags:t.payload});default:return e}},adminInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"get_all_info_start":return Object.assign({},e,{loadingInfo:!0,error:null});case"get_all_info_success":return Object.assign({},e,{loadingInfo:!1,info:t.payload,error:null});case"get_all_info_failure":return Object.assign({},e,{loadingInfo:!1,error:"Something went wrong while loading admin level information."});case"create_forum":return Object.assign({},e,{creatingForumError:null,creatingForum:!0});case"create_forum_success":return Object.assign({},e,{creatingForum:!1,creatingForumError:null});case"create_forum_failure":return Object.assign({},e,{creatingForum:!1,creatingForumError:"Something went wrong while trying to create the forum. Please try again. Also check out if the forum already exists."});case"delete_forum":return Object.assign({},e,{deletingForum:!0,deletingForumError:null});case"delete_forum_success":return Object.assign({},e,{deletingForum:!1,deletingForumError:null});case"delete_forum_failure":return Object.assign({},e,{deletingForum:!1,deletingForumError:"Something went wrong while trying to delete the forum. Please try again later."});default:return e}},userProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_user_profile_start":return Object.assign({},e,{fetchingProfile:!0,error:null});case"fetch_user_profile_success":return Object.assign({},e,{fetchingProfile:!1,profile:t.payload,error:null});case"fetch_user_profile_failure":return Object.assign({},e,{fetchingProfile:!1,error:"Unable to fetch user profile. Please check out for correct username."});default:return e}}}),b=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,_=Object(c.e)(E,b(Object(c.a)(u.a))),y=n(6),O=n(7),j=n(9),C=n(8),k=n(45),w=n(327),F=n.p+"static/media/logo.6aae43f7.png",D=n(328),S=n(326),I=n(325),N=n(178),P=n(321),M=n(15),x=n.n(M),T=n(175),U=n.n(T),L=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){var e;return Object(y.a)(this,n),(e=t.call(this)).logIn=function(t){t.preventDefault(),x.a.post("/api/user/authViaGitHub?user=".concat(e.state.userInput,"&email=").concat(e.state.emailInput)).then((function(e){window.location="/"})).catch((function(e){console.error(e)}))},e.logout=function(){x.a.get("/api/user/signout").then((function(e){window.location="/"})).catch((function(e){console.error(e)}))},e.state={userInput:"",emailInput:""},e}return Object(O.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.signedIn,a=t.userName,r=t.avatar,s=t.gitHandler;return i.a.createElement("div",null,i.a.createElement(w.a.Collapse,null,i.a.createElement(D.a,{className:"mr-auto"},i.a.createElement(S.a,{title:n?a:"Sign Up / Sign In",id:"basic-nav-dropdown"},!n&&i.a.createElement(I.a,{className:"p-3"},i.a.createElement(I.a.Group,null,i.a.createElement(I.a.Label,null,"Username"),i.a.createElement(I.a.Control,{type:"text",onChange:function(t){return e.setState({userInput:t.target.value})},placeholder:"Enter user"})),i.a.createElement(I.a.Group,null,i.a.createElement(I.a.Label,null,"Email"),i.a.createElement(I.a.Control,{type:"email",onChange:function(t){return e.setState({emailInput:t.target.value})},placeholder:"Enter email"})),this.state.userInput.length&&U.a.validate(this.state.emailInput)?i.a.createElement(N.a,{variant:"primary",type:"submit",onClick:this.logIn},"Submit"):null),n&&i.a.createElement("span",{onClick:this.toggleSubMenu},i.a.createElement(P.a,{src:r,alt:"".concat(a," Avatar"),className:"w-100",thumbnail:!0}),i.a.createElement(S.a.Item,{href:"/user/".concat(s)},"My Profile")),n&&i.a.createElement("span",{onClick:this.logout,class:"dropdown-item",href:"/api/user/signout"},"Sign Out")))))}}]),n}(a.Component);L.defaultProps={signedIn:!1,userName:"",gitHandler:"",avatar:""};var A=L,R=n(36),B=n.n(R),H=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props.navigationLinks;return e?i.a.createElement("section",{className:"w-100 navigation-bar"},i.a.createElement("ul",{className:"d-flex justify-content-around"},e.map((function(e){return 0===e.id?i.a.createElement("li",{key:B.a.uniqueId("navLink_")},i.a.createElement(o.a,{to:"/"},"Home")):i.a.createElement("li",{key:B.a.uniqueId("navLink_")},i.a.createElement(o.c,{to:e.link},e.name))})))):null}}]),n}(a.Component);H.defaultProps={navigationLinks:[{id:0,name:"General",link:"/"}]};var W=H,G=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"renderNavLinks",value:function(){var e=this.props.forums;return console.log("hello"),console.log(e),e?e.map((function(e){return{id:e._id,name:e.forum_name,link:"/".concat(e.forum_slug)}})):null}},{key:"render",value:function(){var e=this.props.user,t=e.authenticated,n=e.name,a=e.username,r=e.avatarUrl;return i.a.createElement("header",null,i.a.createElement(w.a,{className:"flex-wrap",variant:"dark"},i.a.createElement("div",{className:"d-flex w-100 justify-content-between"},i.a.createElement(w.a.Brand,{href:"/"},i.a.createElement("img",{src:F,width:"auto",height:"40",alt:"logo"})),i.a.createElement(A,{signedIn:t,userName:n||a,gitHandler:a,avatar:r})),i.a.createElement(W,{navigationLinks:this.renderNavLinks()})))}}]),n}(a.Component),z=Object(l.b)((function(e){return{user:e.user,forums:e.app.forums}}))(G),q=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){return i.a.createElement("div",null)}}]),n}(a.Component);q.defaultProps={};var K=q,V=(n(221),n(322)),J=function(){return function(e,t){e({type:"start_fetching_forums"}),x.a.get("/api/forum").then((function(t){return e({type:"fetching_forums_success",payload:t.data})}),(function(t){return e({type:"fetching_forums_failure"})}))}},X=function(){return function(e,t){e({type:"start_fetching_user"}),x.a.get("/api/user/getUser",{withCredentials:!0}).then((function(t){t.data._id?e({type:"fetching_user_success",payload:t.data}):e({type:"fetching_user_failure"})}),(function(t){return e({type:"fetching_user_failure"})}))}},Y=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.params,n=e.updateCurrentForum,a=e.getForums,i=e.getUser;a(),i(),n(t.forum||"")}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.forums,n=e.params,a=e.currentForum,i=e.updateCurrentForum,r="";n.forum?r=n.forum:t&&t.length&&(r=t[0].forum_slug),r!==a&&i(r)}},{key:"render",value:function(){return this.props.forums?i.a.createElement("div",null,i.a.createElement(k.a,null,i.a.createElement("title",null,"Mosaic Forum")),i.a.createElement(z,null),i.a.createElement("main",null,this.props.children),i.a.createElement(K,null)):i.a.createElement(V.a,null,i.a.createElement("div",{className:"spinner-border",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading...")))}}]),n}(a.Component),$=Object(l.b)((function(e){return{forums:e.app.forums,currentForum:e.app.currentForum}}),(function(e){return{getForums:function(){e(J())},updateCurrentForum:function(t){e(function(e){return{type:"update_current_forum",payload:e}}(t))},getUser:function(){e(X())}}}))(Y),Z=function(){return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.a.createElement("path",{d:"M51.1388842,81.5721454 L69.5667388,100 L92.0066458,100 C96.4114635,100 100,96.4212534 100,92.0066458 L100,7.99335421 C100,3.58853654 96.4212534,0 92.0066458,0 L7.99335421,0 C3.58853654,0 0,3.57874658 0,7.99335421 L0,92.0066458 C0,96.4114635 3.57874658,100 7.99335421,100 L10.5882353,100 L10.5882353,44.7058824 C10.7474244,24.5366987 27.1464843,8.23529412 47.3529412,8.23529412 C67.6575276,8.23529412 84.1176471,24.6954136 84.1176471,45 C84.1176471,64.0263195 69.6647717,79.676989 51.1388842,81.5721454 Z M24.2232146,73.5788183 L24.1176471,73.6843859 L50.4332612,100 L24.1176471,100 L24.1176471,73.4929507 C24.1527823,73.521637 24.1879715,73.5502596 24.2232146,73.5788183 Z",id:"Combined-Shape",fill:"#F1C40F"}),i.a.createElement("circle",{id:"Oval",fill:"#F1C40F",cx:"47.6470588",cy:"45.2941176",r:"23.5294118"})))),i.a.createElement("div",null,"ReForum"))},Q=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"renderNavLinks",value:function(){return[{name:"Dashboard",link:"/admin"}]}},{key:"render",value:function(){var e=this.props.user,t=e.authenticated,n=e.name,a=e.username,r=e.avatarUrl;return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(Z,null),"Welcome Admin",i.a.createElement(A,{signedIn:t,userName:n||a,gitHandler:a,avatar:r})),i.a.createElement(W,{navigationLinks:this.renderNavLinks()}))}}]),n}(a.Component),ee=Object(l.b)((function(e){return{user:e.user,forums:e.app.forums}}))(Q),te=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"componentDidMount",value:function(){this.props.getUser()}},{key:"render",value:function(){var e=this.props.user;return e.fetchingUser?i.a.createElement("div",{style:{textAlign:"center",marginTop:20}},"Loading users profile..."):"admin"===e.role?i.a.createElement("div",null,i.a.createElement(k.a,null,i.a.createElement("title",null,"ReForum | Admin")),i.a.createElement(ee,null),this.props.children):i.a.createElement("div",{style:{textAlign:"center",marginTop:20}},"We are cordially sorry that you are not allowed to view admin panel!",i.a.createElement("br",null),"Please go back to ",i.a.createElement(o.c,{to:"/"},"root")," page.")}}]),n}(a.Component),ne=Object(l.b)((function(e){return{user:e.user}}),(function(e){return{getUser:function(){e(X())}}}))(te),ae=function(){return x.a.get("/api/admin/admin_dashboard_info")},ie=function(e){return function(t,n){t({type:"create_forum"}),function(e){var t=new FormData;return t.append("img",e.mosaicImage),t.append("title",e.title),t.append("slug",e.slug),x.a.post("/api/admin/create_forum",t,{headers:{"Content-Type":"multipart/form-data"}})}(e).then((function(e){ae().then((function(n){t({type:"get_all_info_success",payload:n.data}),e.data.created?t({type:"create_forum_success"}):t({type:"create_forum_failure"})}),(function(e){return t({type:"fetching_discussions_failure",payload:e})}))}),(function(e){return t({type:"create_forum_failure"})}))}},re=function(e){return function(t,n){var a;t({type:"delete_forum"}),(a=e,x.a.post("/api/admin/delete_forum",{forum_id:a})).then((function(e){t({type:"get_all_info_start"}),ae().then((function(n){t({type:"get_all_info_success",payload:n.data}),e.data.deleted?t({type:"delete_forum_success"}):t({type:"delete_forum_failure"})}),(function(e){return t({type:"fetching_discussions_failure",payload:e})}))}),(function(e){return t({type:"delete_forum_failure"})}))}},se=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.count,n=e.label;return i.a.createElement("div",null,i.a.createElement("div",null,t),i.a.createElement("div",null,n))}}]),n}(a.Component);se.defaultProps={count:0,label:"default"};var oe=se,le=n(30),ce=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.type,e.fullWidth,e.noUppercase,e.className,e.style),n=e.onClick;e.alwaysActive;return i.a.createElement("button",{onClick:n,style:t},this.props.children)}}]),n}(a.Component);ce.defaultProps={type:"default",fullWidth:!1,noUppercase:!1,alwaysActive:!1,className:"",style:{},onClick:function(){}};var ue=ce,de=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(y.a)(this,n),(a=t.call(this,e)).state={newForumTitle:"",newForumSlug:"",errorMsg:null,mosaicImage:null},a.handleCreateForum=a.handleCreateForum.bind(Object(le.a)(a)),a}return Object(O.a)(n,[{key:"handleCreateForum",value:function(){this.setState({errorMsg:null});var e=this.state,t=e.newForumTitle,n=e.newForumSlug,a=e.mosaicImage,i=null,r=null;if(""===t)return this.setState({errorMsg:"Forum title is empty. Please provide a valid Forum Title."});if((i=t.trim()).length<4)return this.setState({errorMsg:"Forum title should have at least 4 charecters."});if(!a)return this.setState({errorMsg:"Select an image for mosaic."});if(""===r)return this.setState({errorMsg:"Forum slug is empty. Please provide a valid Forum Slug."});return(r=n.match(/^[a-z\_]+$/)?n:null)&&r.length<4?this.setState({errorMsg:"Forum slug should have at least 4 charecters."}):i?r?void(i&&r&&this.props.createAction({title:i,slug:r,mosaicImage:a})):this.setState({errorMsg:"Please provide a valid Forum Slug. Slug can only contain small case alphabets and underscore."}):this.setState({errorMsg:"Please provide a valid Forum Title."})}},{key:"render",value:function(){var e=this,t=this.props,n=t.forums,a=t.creatingForum,r=t.deleteAction,s=t.deletingForum,o=this.state,l=(o.newForumTitle,o.newForumSlug,o.errorMsg);return i.a.createElement("div",null,i.a.createElement("div",null,"Current Forums"),i.a.createElement("div",null,s&&i.a.createElement("div",null,"Removing forum, please wait..."),n.map((function(e){return i.a.createElement("div",{key:e.id},i.a.createElement("div",null,e.name),i.a.createElement("div",null,"(",e.slug,")"),i.a.createElement("div",null,i.a.createElement(ue,{onClick:function(){r(e.id)}},"Remove")))}))),i.a.createElement("div",null,a&&i.a.createElement("div",null,"Creating forum, please wait..."),i.a.createElement("div",null,"Create New Forum"),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,"Title: "),i.a.createElement("input",{type:"text",placeholder:"Forum Title",onChange:function(t){e.setState({newForumTitle:t.target.value})}})),i.a.createElement("div",null,i.a.createElement("div",null,"Slug: "),i.a.createElement("input",{type:"text",placeholder:"forum_slug",onChange:function(t){e.setState({newForumSlug:t.target.value})}})),i.a.createElement("div",null,i.a.createElement("div",null,"Mosaic Image: "),i.a.createElement("input",{type:"file",accept:"image/jpeg",name:"img",onChange:function(t){e.setState({mosaicImage:t.target.files[0]})}})),i.a.createElement(ue,{onClick:this.handleCreateForum},"Create")),l&&i.a.createElement("div",null,l)))}}]),n}(a.Component);de.defaultProps={};var me=de,pe=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"componentDidMount",value:function(){this.props.getAdminDashboardInfo()}},{key:"render",value:function(){var e=this,t=this.props.adminInfo.info,n=t.discussionCount,a=t.opinionCount,r=t.forumCount,s=t.userCount,o=t.forums,l=this.props,c=l.loadingInfo,u=l.creatingForum,d=l.creatingForumError,m=l.deletingForum,p=l.deletingForumError,f=o.map((function(e){return{id:e._id,name:e.forum_name,slug:e.forum_slug}}));return i.a.createElement("div",null,c&&i.a.createElement("div",null,"Loading dashboard info..."),i.a.createElement("div",null,i.a.createElement(oe,{label:"Users",count:s}),i.a.createElement(oe,{label:"Discussions",count:n}),i.a.createElement(oe,{label:"Opinions",count:a}),i.a.createElement(oe,{label:"Forums",count:r})),i.a.createElement(me,{forums:f,deletingForum:m,deleteAction:function(t){e.props.deleteForum(t)},creatingForum:u,createAction:function(t){e.props.createForum(t)}}),d&&i.a.createElement("div",null,d),p&&i.a.createElement("div",null,p))}}]),n}(a.Component),fe=Object(l.b)((function(e){return{adminInfo:e.adminInfo,loadingInfo:e.adminInfo.loadingInfo,creatingForum:e.adminInfo.creatingForum,creatingForumError:e.adminInfo.creatingForumError,deletingForum:e.adminInfo.deletingForum,deletingForumError:e.adminInfo.deletingForumError}}),(function(e){return{getAdminDashboardInfo:function(){e((function(e,t){e({type:"get_all_info_start"}),ae().then((function(t){return e({type:"get_all_info_success",payload:t.data})}),(function(t){return e({type:"fetching_discussions_failure",payload:t})}))}))},getForums:function(){e(J())},deleteForum:function(t){e(re(t))},createForum:function(t){e(ie(t))}}}))(pe),ge=n(96),he=n(115),ve=n(183),Ee=n(38),be=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){var e;return Object(y.a)(this,n),(e=t.call(this)).onToggle=function(t){t.preventDefault(),e.props.onToggle(e.props.style)},e}return Object(O.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{onMouseDown:this.onToggle},this.props.label)}}]),n}(i.a.Component),_e=(a.Component,a.Component,function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(y.a)(this,n),(a=t.call(this,e)).state={editorState:Ee.EditorState.createEmpty()},a.focus=function(){return a.refs.editor.focus()},a.onEditorStateChange=a.onEditorStateChange.bind(Object(le.a)(a)),a.handleKeyCommand=a.handleKeyCommand.bind(Object(le.a)(a)),a.onTab=a.onTab.bind(Object(le.a)(a)),a.toggleBlockType=a.toggleBlockType.bind(Object(le.a)(a)),a.toggleInlineStyle=a.toggleInlineStyle.bind(Object(le.a)(a)),a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.value;if(e){var t=Object(Ee.convertFromRaw)(JSON.parse(e)),n=Ee.EditorState.createWithContent(t);this.setState({editorState:n})}}},{key:"onEditorStateChange",value:function(e){var t=this.props.onChange;this.setState({editorState:e}),t(JSON.stringify(Object(Ee.convertToRaw)(e.getCurrentContent())))}},{key:"handleKeyCommand",value:function(e){var t=Ee.RichUtils.handleKeyCommand(this.state.editorState,e);return!!t&&(this.onEditorStateChange(t),!0)}},{key:"onTab",value:function(e){this.onEditorStateChange(Ee.RichUtils.onTab(e,this.state.editorState,4))}},{key:"toggleBlockType",value:function(e){this.onEditorStateChange(Ee.RichUtils.toggleBlockType(this.state.editorState,e))}},{key:"toggleInlineStyle",value:function(e){this.onEditorStateChange(Ee.RichUtils.toggleInlineStyle(this.state.editorState,e))}},{key:"customBlockStyles",value:function(e){e.getType()}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.onSave,a=e.readOnly,r="";"newOpinion"===t&&(r="Comment"),"newDiscussion"===t&&(r="Post Photo");var s="";return"newOpinion"===t&&(s="Your comment..."),"newDiscussion"===t&&(s="Discussion summary..."),i.a.createElement("div",null,i.a.createElement("div",{onClick:this.focus,className:"mb-3"},i.a.createElement(Ee.Editor,{blockStyleFn:this.customBlockStyles,readOnly:a,editorState:this.state.editorState,onChange:this.onEditorStateChange,placeholder:s,handleKeyCommand:this.handleKeyCommand,onTab:this.onTab,ref:"editor"})),!a&&i.a.createElement(N.a,{style:{alignSelf:"center"},onClick:n},r))}}]),n}(a.Component));_e.defaultProps={readOnly:!1,value:null,type:"newDiscussion",onChange:function(){},onSave:function(){}};var ye=_e,Oe=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(y.a)(this,n),(a=t.call(this,e)).state={value:!1},a}return Object(O.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.value;this.setState({value:t})}},{key:"updateValue",value:function(e){this.props.onChange(e),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=this.state.value;return i.a.createElement("div",null,i.a.createElement("div",null,"Is it a featured discussion?"),i.a.createElement("div",null,i.a.createElement(ue,{alwaysActive:!!t,onClick:function(){e.updateValue(!0)}},"Yes"),i.a.createElement(ue,{alwaysActive:!t,onClick:function(){e.updateValue(!1)}},"No")))}}]),n}(a.Component);Oe.defaultProps={onChange:function(e){},value:!1};var je=Oe,Ce=n(116),ke=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.withRemove,a=e.removeAction;return i.a.createElement("div",null,t,n&&i.a.createElement(ue,{onClick:a},i.a.createElement("i",null)))}}]),n}(a.Component);ke.defaultProps={name:"",withRemove:!1,removeAction:function(){}};var we=ke,Fe=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(y.a)(this,n),(a=t.call(this,e)).state={errorMsg:null,tags:[],tagName:""},a}return Object(O.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.value;this.setState({tags:t,errorMsg:null})}},{key:"validateTag",value:function(e){return/^[a-z0-9.\-_$@*!]{4,20}$/.test(e)}},{key:"sameTag",value:function(e){var t=this.state.tags,n=!1;return t.map((function(t){return t===e&&(n=!0),null})),n}},{key:"addTag",value:function(){var e=this.state,t=e.tagName,n=e.tags;e.errorMsg;if(this.validateTag(t))if(this.sameTag(t))this.setState({errorMsg:"Same tag!!!"});else{var a=n.concat(t);this.setState({tags:a,errorMsg:null,tagName:""}),this.props.onChange(a)}else this.setState({errorMsg:"Tags can only contain small letters and numbers. No space or special characters please. Min 4 and max 20 chars."})}},{key:"removeTag",value:function(e){var t=this.state.tags,n=[].concat(Object(Ce.a)(t.slice(0,e)),Object(Ce.a)(t.slice(e+1,t.length)));this.setState({tags:n}),this.props.onChange(n)}},{key:"renderTags",value:function(){var e=this;return this.state.tags.map((function(t,n){return i.a.createElement(we,{name:t,key:t,withRemove:!0,removeAction:function(){e.removeTag(n)}})}))}},{key:"renderInput",value:function(){var e=this,t=this.state,n=t.tagName,a=t.tags,r=this.props.maxTagCount;return a.length<r?i.a.createElement("div",null,i.a.createElement("input",{placeholder:"tag name...",value:n,onChange:function(t){e.setState({tagName:t.target.value})}}),i.a.createElement(ue,{onClick:function(){e.addTag()}},i.a.createElement("i",null))):null}},{key:"render",value:function(){var e=this.state,t=e.errorMsg;e.tagName,e.tags,this.props.maxTagCount;return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,"Tags :"),this.renderTags(),this.renderInput()),t&&i.a.createElement("div",null,t))}}]),n}(a.Component);Fe.defaultProps={value:[],maxTagCount:3,onChange:function(e){}};var De=function(e,t,n,a){return function(n,i){n({type:"posting_discussion_start"});var r=i().newDiscussion,s=r.title,o=r.tile,l=r.content,c=r.tags,u=r.pinned,d=!0;return e&&t?null===s||s.length<10?(d=!1,n({type:"posting_discussion_failure",payload:"Title should be at least 10 characters."})):null===l||0===l.length?(d=!1,n({type:"posting_discussion_failure",payload:"Please write some content before posting."})):void 0===o?(d=!1,n({type:"posting_discussion_failure",payload:"Please add a tile ."})):null===c||0===c.length?(d=!1,n({type:"posting_discussion_failure",payload:"Please provide some tags."})):void(d&&function(e){var t=new FormData;for(var n in e)t.append(n,e[n]);return x.a.post("/api/discussion/newDiscussion",t,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})}({userId:e,forumId:t,title:s,content:l,tags:c,pinned:u,tile:o}).then((function(e){!0===e.data.postCreated?(n({type:"posting_discussion_success"}),setTimeout((function(){n({type:"clear_success_message"})}),2e3),a()):n({type:"posting_discussion_failure",payload:"Something is wrong at our server end. Please try again later"})}),(function(e){n({type:"posting_discussion_failure",payload:e})}))):(d=!1,n({type:"posting_discussion_failure",payload:"Something is wrong with user/forum."}))}},Se=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(y.a)(this,n),(a=t.call(this,e)).state={forumId:null,userId:null,fatalError:null,tileImage:null},a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.user,n=e.currentForum,a=e.forums;(0,e.updateDiscussionTags)(["aarp"]),this.setUserAndForumID(t,a,n)}},{key:"componentWillReceiveProps",value:function(e){var t=e.user,n=e.currentForum,a=e.forums;this.setUserAndForumID(t,a,n)}},{key:"setUserAndForumID",value:function(e,t,n){var a=B.a.find(t,{forum_slug:n});if(a){var i=a._id;this.setState({forumId:i,userId:e._id})}else this.setState({fatalError:"Invalid forum buddy, go for the right one!"})}},{key:"renderEditor",value:function(){var e=this.props.user,t=e.authenticated,n=e.role,a=this.props,r=a.updateDiscussionTitle,s=a.updateDiscussionTile,o=a.updateDiscussionContent,l=a.updateDiscussionPinStatus,c=(a.updateDiscussionTags,a.postDiscussion),u=a.currentForum,d=a.successCallback,m=this.props.newDiscussion,p=m.title,f=m.content,g=(m.tags,m.pinned),h=(m.tile,this.state),v=h.forumId,E=h.userId;return t?i.a.createElement("section",{className:"d-flex new-discussion"},i.a.createElement("div",{className:"new-discussion__dropzone-container d-flex justify-content-center align-items-center"},i.a.createElement(ve.a,{accept:"image/jpeg, image/png",onDrop:function(e){return s(e[0])}},(function(e){var t=e.getRootProps,n=e.getInputProps;return i.a.createElement("section",null,i.a.createElement("div",t(),i.a.createElement("input",Object.assign({name:"tile"},n())),i.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files")))}))),i.a.createElement(I.a,{className:"new-discussion__form",onSubmit:function(e){e.preventDefault()}},i.a.createElement(I.a.Group,{controlId:"exampleForm.ControlInput1"},i.a.createElement(I.a.Label,null,i.a.createElement("strong",null,"Discussion Title")),i.a.createElement(I.a.Control,{key:"title",type:"text",value:p,onChange:function(e){r(e.target.value)}})),"admin"===n&&i.a.createElement(I.a.Group,null,i.a.createElement(je,{key:"pinned",value:g,onChange:function(e){l(e)}})),i.a.createElement(I.a.Group,{controlId:"exampleForm.ControlSelect1"},i.a.createElement(I.a.Label,null,"Camera"),i.a.createElement(I.a.Control,{as:"select"},i.a.createElement("option",null,"Sony A6100"),i.a.createElement("option",null,"Olympus OM-D E-M5 Mark III"),i.a.createElement("option",null,"Canon EOS Rebel SL3 / EOS 250D"),i.a.createElement("option",null,"Fujifilm X100V"),i.a.createElement("option",null,"Sony ZV-1"))),i.a.createElement(I.a.Group,null,i.a.createElement(I.a.Check,{type:"checkbox",label:"I am the owner of this photo. AARP may use this photo without permission or attribution. (Required)"})),i.a.createElement(I.a.Group,null,i.a.createElement(I.a.Label,null,i.a.createElement("strong",null,"Description")),i.a.createElement(I.a.Text,{className:"mb-2"},"Describe how your sharp photo connects to the Staying Sharp Pillar Ongoing Exercise?"),i.a.createElement(ye,{key:"content",type:"newDiscussion",value:f,onChange:function(e){o(e)},onSave:function(){c(E,v,u,d)}})))):i.a.createElement("div",null,"Please sign in before posting a new discussion.")}},{key:"render",value:function(){var e=this.state.fatalError;if(e)return i.a.createElement("div",null,e);this.props.currentForum;var t=this.props.newDiscussion,n=t.errorMsg,a=t.postingSuccess,r=t.postingDiscussion;return i.a.createElement("div",null,i.a.createElement("div",null,n),a&&i.a.createElement("div",null,"Your discussion is created :-)"),this.renderEditor(),r&&i.a.createElement("div",null,"Posting discussion..."))}}]),n}(a.Component),Ie=Object(l.b)((function(e){return{user:e.user,forums:e.app.forums,currentForum:e.app.currentForum,newDiscussion:e.newDiscussion}}),(function(e){return{postDiscussion:function(t,n,a,i){e(De(t,n,0,i))},updateDiscussionTitle:function(t){e(function(e){return{type:"update_discussion_title",payload:e}}(t))},updateDiscussionTile:function(t){e({type:"update_discussion_tile",payload:t})},updateDiscussionContent:function(t){e(function(e){return{type:"update_discussion_content",payload:e}}(t))},updateDiscussionPinStatus:function(t){e(function(e){return{type:"update_discussion_pin_status",payload:e}}(t))},updateDiscussionTags:function(t){e(function(e){return{type:"update_discussion_tags",payload:e}}(t))}}}))(Se),Ne=n(324),Pe=n(329),Me=n(323),xe=n(179),Te=n(330),Ue=function(e,t){return x.a.get("/api/forum/".concat(e,"/discussions?sorting_method=").concat(t))},Le=n(184),Ae=n(72),Re=n.n(Ae),Be=function(e){return x.a.get("/api/discussion/".concat(e))},He=function(e){return function(t,n){var a;t({type:"toggle_favorite_start"}),(a=e,x.a.put("/api/discussion/toggleFavorite/".concat(a))).then((function(e){e.data._id?(t({type:"toggle_favorite_success"}),t({type:"fetching_single_discussion_success",payload:e.data})):t({type:"toggle_favorite_failure"})}),(function(e){return t({type:"toggle_favorite_failure"})}))}},We=function(e,t){return function(n,a){n({type:"posting_opinion_start"}),!e.content||e.content.length<20?n({type:"posting_opinion_failure",payload:"Please provide a bit more info in your opinion....at least 20 characters."}):function(e){return x.a.post("/api/opinion/newOpinion",e)}(e).then((function(e){e.data._id?Be(t).then((function(e){n({type:"fetching_single_discussion_success",payload:e.data}),n({type:"posting_opinion_success"})}),(function(e){return n({type:"fetching_single_discussion_failure"})})):n({type:"posting_opinion_failure"})}),(function(e){return n({type:"posting_opinion_failure"})}))}},Ge=function(e){return function(t,n){t({type:"delete_disc_start"}),function(e){return x.a.delete("/api/discussion/deleteDiscussion/".concat(e))}(e).then((function(e){e.data.deleted?t({type:"delete_disc_success"}):t({type:"delete_disc_failure"})}),(function(e){return t({type:"delete_disc_failure"})}))}},ze=function(e,t){return function(n,a){n({type:"delete_opinion_start",payload:e}),function(e){return x.a.delete("/api/opinion/deleteOpinion/".concat(e))}(e).then((function(e){e.data.deleted?Be(t).then((function(e){n({type:"delete_opinion_success"}),n({type:"fetching_single_discussion_success",payload:e.data})}),(function(e){return n({type:"fetching_single_discussion_failure"})})):n({type:"delete_opinion_failure"})}),(function(e){return n({type:"delete_opinion_failure"})}))}},qe=n(98),Ke=n.n(qe),Ve=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.discTitle,a=e.discContent,r=e.favoriteCount,s=e.favoriteAction,o=e.userFavorited,l=e.toggleingFavorite,c=e.allowDelete,u=e.deletingDiscussion,d=e.deleteAction;return i.a.createElement("section",{className:"single-discussion"},i.a.createElement("div",null,n),i.a.createElement("div",{className:"mt-3 mb-3 d-flex single-discussion__tools align-items-center justify-content-between"},i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){!l&&s(t)},className:o?"active misc-button p-2":"misc-button p-2"},i.a.createElement("img",{src:Ke.a}))," ",i.a.createElement("span",{className:"ml-2"},r," Kudos")),c&&i.a.createElement(ue,{noUppercase:!0,onClick:function(){d()}},i.a.createElement("i",null),i.a.createElement("span",null,"Delete"))),i.a.createElement(ye,{readOnly:!0,value:a}),u&&i.a.createElement("div",null,"Deleting Discussion..."))}}]),n}(a.Component);Ve.defaultProps={id:0,userAvatar:null,userName:"User name",userGitHandler:"github",discTitle:"Default Discussion Title",discDate:"a day ago",discContent:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",tags:["react","redux","webkit"],favoriteCount:1,favoriteAction:function(){},userFavorited:!1,toggleingFavorite:!1,allowDelete:!1,deletingDiscussion:!1,deleteAction:function(){}};var Je=Ve,Xe=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.posting,n=e.onSubmit,a=e.onChange;return t?i.a.createElement("div",null,"Posting your opinion..."):i.a.createElement(ye,{type:"newOpinion",onSave:n,onChange:a})}}]),n}(a.Component);Xe.defaultProps={posting:!1,onSubmit:function(){},onChange:function(e){}};var Ye=Xe,$e=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.opinionId,n=e.userAvatar,a=(e.opDate,e.opContent),r=e.userId,s=e.currentUserId,o=e.currentUserRole,l=e.deleteAction,c=e.deletingOpinion,u=r===s||"admin"===o;return i.a.createElement("div",{className:"opinion d-flex"},i.a.createElement("div",{className:"opinion__image-container"},i.a.createElement(P.a,{src:n,fluid:!0,roundedCircle:!0}),u&&i.a.createElement(ue,{noUppercase:!0,onClick:function(){l(t)}},i.a.createElement("i",null),i.a.createElement("span",null,"Delete"))),i.a.createElement("div",{className:"opinion__comment-container"},i.a.createElement(ye,{readOnly:!0,value:a})),c===t&&i.a.createElement("div",null,"Deleting Opinion ..."))}}]),n}(a.Component);$e.defaultProps={opinionId:"12345",userAvatar:null,userName:"User name",userGitHandler:"github",opDate:"a day ago",opContent:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",userId:"12345",currentUserId:"12345",currentUserRole:"user",deleteAction:function(){},deletingOpinion:null};var Ze=$e,Qe=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(y.a)(this,n),(a=t.call(this,e)).state={opinionContent:""},a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.discussionSlug;this.props.getDiscussion(e)}},{key:"componentDidUpdate",value:function(){var e=this.props;e.deletedDiscussion,e.deletedDiscussionRedirect}},{key:"componentWillUnmount",value:function(){this.props.updateOpinionContent(null)}},{key:"userFavoritedDiscussion",value:function(e,t){for(var n=!1,a=0;a<t.length;a++)t[a]===e&&(n=!0);return n}},{key:"handleReplySubmit",value:function(){var e=this.props,t=e.postOpinion,n=e.discussion,a=e.opinionContent,i=e.userId,r=this.props.discussion.discussion_slug;t({forum_id:this.props.discussion.forum._id,discussion_id:n._id,user_id:i,content:a},r)}},{key:"deleteDiscussion",value:function(){var e=this.props.params.discussion;(0,this.props.deletePost)(e)}},{key:"deleteOpinion",value:function(e){var t=this.props.params.discussion,n=this.props.deleteOpinion;n(e,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.discussion,a=t.toggleFavorite,r=t.toggleingFavorite,s=t.updateOpinionContent,o=t.postingOpinion,l=t.opinionError,c=t.deletingOpinion,u=t.deletingDiscussion;if(n){var d=n._id,m=n.content,p=n.date,f=n.favorites,g=n.title,h=n.tags,v=n.opinions,E=n.user,b=E.avatarUrl,_=E.name,y=E.username,O=!1;n.user._id!==this.props.userId&&"admin"!==this.props.userRole||(O=!0);var j=this.userFavoritedDiscussion(this.props.userId,f);return i.a.createElement("div",null,i.a.createElement(Je,{id:d,userAvatar:b,userName:_||y,userGitHandler:y,discTitle:g,discDate:p,discContent:m,tags:h,favoriteCount:f.length,favoriteAction:a,userFavorited:j,toggleingFavorite:r,allowDelete:O,deletingDiscussion:u,deleteAction:this.deleteDiscussion.bind(this)}),l&&i.a.createElement("div",null,l),i.a.createElement(Ye,{posting:o,onSubmit:this.handleReplySubmit.bind(this),onChange:function(e){s(e)}}),i.a.createElement("hr",null),v&&v.length?i.a.createElement("p",null,i.a.createElement("strong",null,v.length," Comments")):null,v&&v.map((function(t){return i.a.createElement(Ze,{key:t._id,opinionId:t._id,userAvatar:t.user.avatarUrl,userName:t.user.name,userGitHandler:t.user.username,opDate:t.date,opContent:t.content,userId:t.user_id,currentUserId:e.props.userId,currentUserRole:e.props.userRole,deleteAction:e.deleteOpinion.bind(e),deletingOpinion:c})})))}return null}}]),n}(a.Component),et=Object(l.b)((function(e){return{forums:e.app.forums,userId:e.user._id,userRole:e.user.role,toggleingFavorite:e.discussion.toggleingFavorite,deletingDiscussion:e.discussion.deletingDiscussion,deletedDiscussion:e.discussion.deletedDiscussion,opinionContent:e.discussion.opinionContent,postingOpinion:e.discussion.postingOpinion,opinionError:e.discussion.opinionError,deletingOpinion:e.discussion.deletingOpinion,error:e.discussion.error,discussion:e.discussion.discussion}}),(function(e){return{getDiscussion:function(t){e(function(e){return function(t,n){t({type:"fetching_single_discussion_start"}),Be(e).then((function(e){e.data?t({type:"fetching_single_discussion_success",payload:e.data}):t({type:"fetching_single_discussion_failure"})}),(function(e){return t({type:"fetching_single_discussion_failure"})}))}}(t))},toggleFavorite:function(t){e(He(t))},updateOpinionContent:function(t){e({type:"update_opinion_content",payload:t})},postOpinion:function(t,n){e(We(t,n))},deletePost:function(t){e(Ge(t))},deletedDiscussionRedirect:function(){e((function(e,t){e({type:"delete_disc_redirect"})}))},deleteOpinion:function(t,n){e(ze(t,n))}}}))(Qe);function tt(e){var t=Object(a.useState)(!1),n=Object(Le.a)(t,2),r=n[0],s=n[1],o=e.discussion.user,l=e.discussion.title,c=e.discussion.content,u=e.discussion.pinned,d=e.discussion.date,m=e.idKey,p=e.discussion.favorites.length,f=e.discussion,g=(e.discussionType,Re()(d).from(Re()()));return i.a.createElement(Te.a,{key:m,className:"discussion-box mb-3"},i.a.createElement(Te.a.Body,null,i.a.createElement("section",{className:"discussion-box__header d-flex mb-3"},i.a.createElement(P.a,{src:o.avatarUrl,roundedCircle:!0}),i.a.createElement("div",{className:"d-flex flex-column justify-content-center"},i.a.createElement("span",null,o.name||o.username," ",u?i.a.createElement("span",{className:"rectangle"},"Featured"):null),i.a.createElement("span",{className:"text-muted"},"admin"===o.role?"MODERATOR":"USER"," - ",g))),i.a.createElement(P.a,{className:"discussion-box__image",src:"data:image/jpeg;base64,"+f.base64,fluid:!0}),i.a.createElement(Te.a.Text,null,c.text),i.a.createElement("p",null,l),i.a.createElement("div",{className:"d-flex discussion-box__footer align-items-center justify-content-between"},i.a.createElement("div",null,i.a.createElement("button",{className:"misc-button p-2"},i.a.createElement("img",{src:Ke.a}))," ",i.a.createElement("span",{className:"ml-2"},p," Kudos")),i.a.createElement(N.a,{onClick:function(){return s(!0)}},"Comment"))),i.a.createElement(Ne.a,{size:"xl",show:r,onHide:function(){return s(!1)},"aria-labelledby":"example-modal-sizes-title-lg"},i.a.createElement(Ne.a.Body,{className:"p-0 d-flex"},i.a.createElement("div",{className:"w-75 modal-image",style:{backgroundImage:"url(data:image/jpeg;base64,"+f.base64+")"}}),i.a.createElement("div",{className:"w-25 p-3"},i.a.createElement("section",{className:"discussion-box__header d-flex mb-3"},i.a.createElement(P.a,{src:o.avatarUrl,roundedCircle:!0}),i.a.createElement("div",{className:"d-flex flex-column justify-content-center"},i.a.createElement("span",null,o.name||o.username," "),i.a.createElement("span",{className:"text-muted"},g))),i.a.createElement(et,{discussionSlug:f.discussion_slug})))))}tt.defaultProps={discussionId:1,voteCount:20,user:{},userGitHandler:"github",discussionTitle:"This is a default post title",time:Re()(),opinionCount:12,tags:["react","redux","nodejs"],link:"",userProfile:!1};var nt=tt,at=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"renderSort",value:function(){var e=this.props,t=(e.activeSortingMethod,e.onChangeSortingMethod);return"general"===this.props.type?i.a.createElement("div",null,i.a.createElement("span",{onClick:function(){return t("date")}},"Latest"),i.a.createElement("span",{onClick:function(){return t("popularity")}},"Popular")):null}},{key:"renderEmptyDiscussionLine",value:function(e,t){if(!e&&(!t||0===t.length))return i.a.createElement("div",null,"No discussions...")}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.loading,a=e.discussions,r=(e.currentForum,e.userProfile);return"general"===t&&"Discussions","pinned"===t&&"Pinned",i.a.createElement("div",null,i.a.createElement("div",null,!r&&this.renderSort()),n&&i.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},i.a.createElement("div",{className:"spinner-border",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading..."))),this.renderEmptyDiscussionLine(n,a),!n&&i.a.createElement("div",null,a&&a.map((function(e){return i.a.createElement(nt,{discussion:e,userProfile:r,discussionType:t,key:e._id,idKey:e._id})}))))}}]),n}(a.Component);at.defaultProps={type:"general",loading:!1,discussions:[],currentForum:"general",activeSortingMethod:"date",onChangeSortingMethod:function(e){},userProfile:!1};var it=at,rt=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props.currentForum;return i.a.createElement("div",null,i.a.createElement(o.c,{to:"/".concat(e,"/new_discussion")},i.a.createElement(ue,{type:"outline",fullWidth:!0,noUppercase:!0},"New Discussion")))}}]),n}(a.Component);rt.defaultProps={currentForum:"general"};var st,ot=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(y.a)(this,n),(a=t.call(this,e)).setImageModalPopover=function(e){a.setState({imageOnModal:a.state.loadedEncodedImages[e],loadingImage:!1})},a.closeModal=function(){a.setState({showModal:!1})},a.getIndividualImage=function(e,t){for(var n in a.state.coordinates){var i=n.split("-"),r=parseInt(i[0]),s=parseInt(i[1]);if(e>=r&&e<=r+a.state.tileSize&&t>=s&&t<=s+a.state.tileSize)if("break"===function(){var e=a.state.coordinates[n];return Object.keys(a.state.loadedEncodedImages).includes(e)&&a.state.loadedEncodedImages[e]?a.setImageModalPopover(e):a.setState({loadingImage:!0},(function(){x.a.get("/api/forum/tile?tileFileName="+e+"&forumId="+a.state.currentForumId).then((function(t){a.setState({loadedEncodedImages:Object(he.a)(Object(he.a)({},a.state.loadedEncodedImages),{},Object(ge.a)({},e,t.data.base64))},(function(){return a.setImageModalPopover(e)}))})).catch((function(e){return console.error(e)}))})),"break"}())break}},a.getCoordenate=function(e){var t=e.target.getBoundingClientRect(),n=e.clientX,i=e.clientY,r=n-t.left,s=i-t.top;void 0!==st&&window.clearTimeout(st),st=window.setTimeout((function(){a.state.inPopover||a.setState({x:n,y:i},(function(){a.state.showModal||a.getIndividualImage(r,s)}))}),500)},a.drawImage=function(e){var t=a.canvas.current.getContext("2d"),n=new Image,i=Object(le.a)(a);n.onload=function(){var n=this,a={canvasWidth:this.width,canvasHeight:this.height,loading:!1,coordinates:e.mosaic.coordinates,tileSize:parseInt(e.mosaic.tile_size)};i.setState(a,(function(){i.canvas.current.width=i.state.canvasWidth,i.canvas.current.height=i.state.canvasHeight,t.drawImage(n,0,0,n.width,n.height)}))},n.src="data:image/jpeg;base64,"+e.mosaic.base64},a.successCallback=function(){window.location="/"},a.state={loading:!1,canvasHeight:0,canvasWidth:0,coordinates:null,loadedEncodedImages:{},showModal:!1,imageOnModal:"",showUploadTilesButton:!1,showUploadMosaicImageButton:!1,toUploadTilesList:null,toUploadMosaicList:null,showSuccessMessage:!1,successMessage:"",tileSize:null,timesWider:"1",widthHeight:"3",quality:100,showTooltip:!1,currentForumId:null,showDiscussionModal:!1},a.canvas=i.a.createRef(),a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.currentForumId,a=t.getDiscussions,i=t.getCurrentForum;a(n());var r=i();r&&this.setState({currentForumObj:r},(function(){r.mosaic&&e.setState({currentForumId:r._id},(function(){return e.drawImage(r)}))}))}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,a=n.currentForum,i=n.currentForumId,r=n.getDiscussions,s=(n.getPinnedDiscussions,n.getCurrentForum);if(e.currentForum!==a){r(i(),!0);var o=s();o&&this.setState({currentForumObj:o},(function(){o.mosaic&&t.setState({currentForumId:o._id},(function(){return t.drawImage(o)}))}))}}},{key:"handleSortingChange",value:function(e){var t=this.props,n=t.currentForum,a=t.getDiscussions,i=t.updateSortingMethod;t.sortingMethod!==e&&(i(e),a(n,!1,!0))}},{key:"renderNewDiscussionButtion",value:function(){var e=this;this.props.currentForum;return i.a.createElement("div",null,i.a.createElement(N.a,{className:"camera",onClick:function(){return e.setState({showDiscussionModal:!0})}},"Post a Photo"),i.a.createElement(Ne.a,{className:"new-discussion-modal",show:this.state.showDiscussionModal,size:"xl",onHide:function(){return e.setState({showDiscussionModal:!1})}},i.a.createElement(Ne.a.Header,{closeButton:!0},i.a.createElement(Ne.a.Title,null,"Post a Photo")),i.a.createElement(Ne.a.Body,{className:"p-0"},i.a.createElement(Ie,{successCallback:this.successCallback}))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentForum,a=t.discussions,r=t.fetchingDiscussions,s=(t.pinnedDiscussions,t.fetchingPinnedDiscussions,t.sortingMethod),o=t.error;return o?i.a.createElement("div",null,o):i.a.createElement("section",{className:"forum-feed"},i.a.createElement(k.a,null,i.a.createElement("title",null,"Mosaic Forum | ".concat(n))),i.a.createElement(V.a,{className:"forum-feed__canvas-container pt-5 pb-5",fluid:!0},i.a.createElement(V.a,{className:"justify-content-center d-flex flex-wrap"},i.a.createElement("section",{className:"intro w-100 pb-4"},i.a.createElement("h1",null,i.a.createElement("strong",null,"Community Photo Mosaic: Ongoing Exercise")),i.a.createElement("div",{className:"d-flex flex-wrap mt-4"},i.a.createElement("strong",{className:"w-100"},"Directions"),i.a.createElement("p",{className:"w-75 pr-5"},"View the mosiac image below. Rollover individual images to see a larger thumbnail view, or click to view the full image with description and comments. Post your own photo and be part of the community."),i.a.createElement("div",{className:"w-25"},this.renderNewDiscussionButtion()))),i.a.createElement(Pe.a,{placement:"right",style:{display:this.state.loading||!this.state.coordinates?"none":"block",top:this.state.y,left:this.state.x},onClick:function(){return e.setState({showModal:!0})},onMouseOut:function(){return e.setState({inPopover:!1})},onMouseOver:function(){return e.setState({inPopover:!0})}},i.a.createElement(Pe.a.Content,null,this.state.loadingImage?i.a.createElement("div",{className:"d-flex mt-2 justify-content-center align-items-center"},i.a.createElement("div",{className:"spinner-border",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading..."))):i.a.createElement(P.a,{src:"data:image/jpeg;base64, "+this.state.imageOnModal,thumbnail:!0}))),i.a.createElement("canvas",{onMouseMove:this.getCoordenate,ref:this.canvas}))),i.a.createElement(V.a,{className:"pt-4"},i.a.createElement(Me.a,null,i.a.createElement(xe.a,{md:"8"},this.renderNewDiscussionButtion(),i.a.createElement(it,{type:"general",loading:r,discussions:a,currentForum:n,onChangeSortingMethod:this.handleSortingChange.bind(this),activeSortingMethod:s})),i.a.createElement(xe.a,{md:"4"},i.a.createElement("section",{className:"forum-feed__social d-flex justify-content-around pr-4 pl-4 pb-4"},i.a.createElement("span",{className:"fa-stack fa-lg"},i.a.createElement("i",{className:"fa fa-circle facebook fa-stack-2x"}),i.a.createElement("i",{className:"fa fa-facebook fa-stack-1x fa-inverse"})),i.a.createElement("span",{className:"fa-stack fa-lg "},i.a.createElement("i",{className:"fa fa-circle linkedin fa-stack-2x"}),i.a.createElement("i",{className:"fa fa-linkedin fa-stack-1x fa-inverse"})),i.a.createElement("span",{className:"fa-stack fa-lg "},i.a.createElement("i",{className:"fa fa-circle twitter fa-stack-2x"}),i.a.createElement("i",{className:"fa fa-twitter fa-stack-1x fa-inverse"})),i.a.createElement("span",{className:"fa-stack fa-lg"},i.a.createElement("i",{className:"fa fa-circle fa-stack-2x"}),i.a.createElement("i",{className:"fa fa fa-envelope fa-stack-1x fa-inverse"})),i.a.createElement("span",{className:"fa-stack fa-lg"},i.a.createElement("i",{className:"fa fa-circle fa-stack-2x"}),i.a.createElement("i",{className:"fa fa-print fa-stack-1x fa-inverse"})),i.a.createElement("span",{className:"fa-stack fa-lg"},i.a.createElement("i",{className:"fa fa-circle fa-stack-2x"}),i.a.createElement("i",{className:"fa fa-user-plus fa-stack-1x fa-inverse"}))),i.a.createElement(Te.a,{className:"mb-3"},i.a.createElement(Te.a.Header,null,i.a.createElement("h5",null,"Mosaic Overview")),i.a.createElement(Te.a.Body,null,i.a.createElement(Te.a.Text,{className:"small mb-3"},this.state.currentForumObj?i.a.createElement(P.a,{src:"data:image/jpeg;base64, "+this.state.currentForumObj.base64,fluid:!0}):null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc et nibh a risus sodales faucibus id sed nulla. Nam erat mi, volutpat id lobortis in, congue nec ante. Proin eu enim sed enim molestie accumsan fermentum at nisi. Donec et ultrices nulla. In et euismod odio, in consectetur tellus. Maecenas a vulputate orci. Proin venenatis hendrerit urna."))),i.a.createElement(Te.a,null,i.a.createElement(Te.a.Header,null,i.a.createElement("h5",null,"About the Moderator")),i.a.createElement(Te.a.Body,null,i.a.createElement("section",{className:"moderator-card d-flex"},i.a.createElement("div",{className:"moderator-card__img-container w-25"},this.state.currentForumObj&&this.state.currentForumObj.admin?i.a.createElement(P.a,{src:this.state.currentForumObj.admin.avatarUrl,fluid:!0}):null),i.a.createElement("div",{className:"w-75"},i.a.createElement("div",{className:"w-100"},i.a.createElement("strong",null,"NAME: "),i.a.createElement("p",{className:"mb-0"}," ",this.state.currentForumObj&&this.state.currentForumObj.admin?this.state.currentForumObj.admin.name:null)),i.a.createElement("div",{className:"w-100"},i.a.createElement("strong",null,"Nunc et nibh:"),i.a.createElement("p",null,"a risus sodales faucibus id sed nulla. ")))),i.a.createElement(Te.a.Text,{className:"small mb-3"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc et nibh a risus sodales faucibus id sed nulla. Nam erat mi, volutpat id lobortis in, congue nec ante. Proin eu enim sed enim molestie accumsan fermentum at nisi. Donec et ultrices nulla. In et euismod odio, in consectetur tellus. Maecenas a vulputate orci. Proin venenatis hendrerit urna.")))))),i.a.createElement(Ne.a,{size:"xl",show:this.state.showModal,onHide:this.closeModal},i.a.createElement(Ne.a.Header,{closeButton:!0}),i.a.createElement(Ne.a.Body,{className:"text-center"},i.a.createElement("div",{className:"tile-image-container",style:{height:"100%",backgroundImage:'url("data:image/jpeg;base64, '+this.state.imageOnModal+'")',backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center"}})),i.a.createElement(Ne.a.Footer,null,i.a.createElement(N.a,{variant:"secondary",onClick:this.closeModal},"Close"))))}}]),n}(a.Component),lt=Object(l.b)((function(e){return{currentForum:e.app.currentForum,currentForumId:function(){var t=B.a.find(e.app.forums,{forum_slug:e.app.currentForum});return t?t._id:null},getCurrentForum:function(){var t=B.a.find(e.app.forums,{forum_slug:e.app.currentForum});return t||null},fetchingDiscussions:e.feed.fetchingDiscussions,discussions:e.feed.discussions,fetchingPinnedDiscussions:e.feed.fetchingPinnedDiscussions,sortingMethod:e.feed.sortingMethod,error:e.feed.error}}),(function(e){return{getDiscussions:function(t,n,a,i){e(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(a,i){var r=i().feed.sortingMethod;(t||n)&&a({type:"start_fetching_discussions"}),e?Ue(e,r).then((function(e){return a({type:"fetching_discussions_success",payload:e.data})}),(function(e){return a({type:"fetching_discussions_failure"})})):a({type:"invalid_forum"})}}(t,n,a,i))},updateSortingMethod:function(t){e(function(e){return{type:"update_sorting_method",payload:e}}(t))}}}))(ot),ct=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.gitHandler,a=e.location,r=e.avatarUrl;return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("img",{src:r,alt:"".concat(t," avatar")})),i.a.createElement("div",null,i.a.createElement("div",null,t),i.a.createElement("div",null,i.a.createElement("i",null)," ",n),i.a.createElement("div",null,a)))}}]),n}(a.Component);ct.defaultProps={name:"Hello World",gitHandler:"helloWorld",location:"Somewhere in the world",avatarUrl:"https://google.com"};var ut=ct,dt=function(e){return function(t,n){t({type:"fetch_user_profile_start"}),function(e){return x.a.get("/api/user/profile/".concat(e))}(e).then((function(e){e.data.error?t({type:"fetch_user_profile_failure"}):t({type:"fetch_user_profile_success",payload:e.data})}),(function(e){return t({type:"fetch_user_profile_failure"})}))}},mt=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.fetchUserProfile)(this.props.params.username)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.params.username,n=e.params.username;t!==n&&(0,this.props.fetchUserProfile)(n)}},{key:"render",value:function(){var e=this.props,t=e.fetchingProfile,n=e.profile,a=e.error;if(a)return i.a.createElement("div",null,a);var r=n.name,s=n.username,o=n.avatarUrl,l=n.github,c=n.discussions;return t?i.a.createElement("div",null,"Loading users profile ..."):i.a.createElement("div",null,i.a.createElement(k.a,null,i.a.createElement("title",null,"".concat(r||s," | ReForum"))),i.a.createElement("div",null,i.a.createElement(ut,{name:r,gitHandler:s,location:l.location,avatarUrl:o}),i.a.createElement(it,{userProfile:!0,type:"general",discussions:c})))}}]),n}(a.Component),pt=Object(l.b)((function(e){return{fetchingProfile:e.userProfile.fetchingProfile,profile:e.userProfile.profile,error:e.userProfile.error}}),(function(e){return{fetchUserProfile:function(t){e(dt(t))}}}))(mt),ft=function(e){Object(j.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){return i.a.createElement("h3",null,"Coudn't found the url buddy. Please check it out.")}}]),n}(a.Component);s.a.render(i.a.createElement(l.a,{store:_},i.a.createElement(o.e,{history:o.f},i.a.createElement(o.d,{path:"/admin",component:ne},i.a.createElement(o.b,{component:fe})),i.a.createElement(o.d,{path:"/",component:$},i.a.createElement(o.b,{component:lt}),i.a.createElement(o.d,{path:":forum",component:lt}),i.a.createElement(o.d,{path:":forum/discussion/:discussion",component:et}),i.a.createElement(o.d,{path:":forum/new_discussion",component:Ie}),i.a.createElement(o.d,{path:"user/:username",component:pt}),i.a.createElement(o.d,{path:"*",component:ft})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},98:function(e,t,n){e.exports=n.p+"static/media/thumbsup-icon.02cd542c.svg"}},[[187,1,2]]]);
//# sourceMappingURL=main.613f4012.chunk.js.map